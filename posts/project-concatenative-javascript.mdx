<script src="./project-concatenative-javascript.js" type="module"></script>

# Project: Concatenative JavaScript

After I explored Forth, I wondered if I could apply some of what I learned to my comfort zone of JavaScript in a browser environment. 

The TypeScript source code for the language [lives here](https://github.com/reedspool/reeds-website/blob/main/src/project-concatenative-javascript.tsx).

## Tests

If you see ❌ or 🚧, then that test has failed.

<div>First test: <span c="' Success' me >text">🚧</span></div>

<div>Leading and extra whitespace don't change anything: <span c="    ' Success'    me    >text   ">🚧</span></div>

<div>Emojis work: <span c="' ✅' me >text">🚧</span></div>

<div>Look in the console to see if this logs a checkmark: <span c="' Log test: ✅' log">🚧</span></div>

| Word(s)        | ✅ / ❌ / 🚧                                                                            |
|-------------|---------------------------------------------------------------------------------|
| `swap`      | <span c="' ✅' ' ❌' swap me >text">🚧</span>                                   |
| `dup`       | <span c="' ✅' dup me >text me >text">🚧</span>                                 |
| `drop`      | <span c="' ✅' ' ❌' drop me >text">🚧</span>                                   |
| `over`      | <span c="' ✅' ' ❌' over me >text">🚧</span>                                   |
| `rot`       | <span c="' ✅' ' ❌' ' ❌' rot me >text">🚧</span>                              |
| `&&`        | <span c="true ' ✅' && me >text">🚧</span>                                      |
| `:` and `;` | <span c=": test ' ✅' ; test me >text">🚧</span>                                |
| `typeof` | <span c="' test' ' string' typeof ' ✅' && me >text">🚧</span>                                |
| `now` | <span c="now ' number' typeof ' ✅' && me >text">🚧</span>                                |
| `@` and `!` | <span c="variable foo 5 ' ✅' foo ! foo @ me >text">🚧</span>                                |
| Click event | <span c="[ ' ✅' event target> >text ] ' click' me .addEventListener">🚧</span> |

## Logbook

### Tue Feb 06 21:53:03 PST 2024

I reflected on [Hyperscript](https://hyperscript.org) and how it added a convenient layer on top of JavaScript. In my experience with Hyperscript, I was frustrated with extending the language. And that was one of the main strengths of what I'd learned of Forth. So I started this experiment as a way to explore some universe where a library as convenient as Hyperscript was as extensible as Forth.

I started with a script on this page.

### Wed Feb  7 10:46:08 AM PST 2024

I continued making progress in the time normally allotted for creative coding. Today's creative coding prompt was "some of my favorite things." JavaScript, exploring programming languages, and putting energy towards creative interfaces felt aligned with the prompt.

I succeeded in getting some small code on an HTML attribute to work how I expected! It was so fun to use JS's step debugger to walk through my code and see it work. I continued to make some more basic words, like `dup`, `swap`, and `drop`.

### Thu Feb 22 08:49:18 AM PST 2024

There were two different things I wanted to implement in my language. Well, re-implement. I'd struggled thinking of things I'd like to use my language for as I was writing it, because I invested most of my interest and drive in that moment into the language itself.

<Future>I wanted to reimplement both some hyperscript I'd written recently in <Link slug="project-typing-game-with-feedback-loops">my typing game</Link>. The hyperscript was relatively simple, but there was a lot that this language was missing to get there.</Future>

<Future>I wanted to reimplement <Link slug="project-explore-forth" hash="five-minute-timer-in-forth">a 5 minute timer I'd written in Forth</Link>.</Future>

Both of these ideas were pressing today since I wanted to give a presentation on this concept. I signed up to give the presentation to give me an accountability target for the day, and I had to admit that was motivating me!

I started taking incremental steps towards those things, to see how far I could get before the presentation. Since my hyperscript example relied heavily on variables, and I wasn't immediately sure how I'd implement the same thing in my language, I started with the forth example. I implemented `now` to get the current milliseconds and `typeof` to quickly test if the result was a number. Then, of course, I noticed that my Forth code also uses variables. But these are Forth-type variables, which are much more straightforward (now that I've read Starting Forth) than Hyperscript variables. So I pushed forward.

I got an implementation of variables that matched the most basic semantics from Forth. That is, my new words `@` and `!` could act successfully on the result of a variable. But pointer arithmetic would not work, since there was no linear memory behind it. In short, I faked it.
