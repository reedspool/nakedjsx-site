import{a as m,t as E,c as ye}from"../chunks/disclose-version.CLXa-AFD.js";import{h as Ae,C as bt,Q as Pr,a0 as Ir,A as Er,b as zr,z as Cr,_ as or,H as Sr,B as Kt,D as xt,c as et,W as Tr,as as lt,F as sr,a as lr,G as Fr,w as Wt,at as Mr,au as Ar,Z as Rr,av as Dr,d as Or,O as $r,an as Ur,s as Yt,aw as Lr,ax as Nr,ay as Br,T as qr,az as Gr,y as jr,aA as Hr,p as Dt,a6 as C,i as Ot,r as I,v as i,ar as De,a7 as d,a9 as f,a8 as l,a5 as R,u as Kr,n as _e,e as Wr,g as U}from"../chunks/runtime.Bm73Tpmf.js";import{d as ur,s as z}from"../chunks/render.BfQ3xYTj.js";import{i as F,b as Yr,p as Xt}from"../chunks/this.CnBV6IW7.js";import{s as dr}from"../chunks/snippet.Cwy7Ud8A.js";import{o as Xr}from"../chunks/index-client.B3YRV3HL.js";function wt(e,t){return t}function Zr(e,t,r,n){for(var a=[],s=t.length,o=0;o<s;o++)Ar(t[o].e,a,!0);var c=s>0&&a.length===0&&r!==null;if(c){var u=r.parentNode;Rr(u),u.append(r),n.clear(),Re(e,t[0].prev,t[s-1].next)}Dr(a,()=>{for(var h=0;h<s;h++){var g=t[h];c||(n.delete(g.k),Re(e,g.prev,g.next)),Or(g.e,!c)}})}function kt(e,t,r,n,a,s=null){var o=e,c={flags:t,items:new Map,first:null};{var u=e;o=Ae?bt(Pr(u)):u.appendChild(Ir())}Ae&&Er();var h=null,g=!1;zr(()=>{var _=r(),S=Cr(_)?_:_==null?[]:or(_),y=S.length;if(g&&y===0)return;g=y===0;let v=!1;if(Ae){var k=o.data===Sr;k!==(y===0)&&(o=Kt(),bt(o),xt(!1),v=!0)}if(Ae){for(var ae=null,q,x=0;x<y;x++){if(et.nodeType===8&&et.data===Tr){o=et,v=!0,xt(!1);break}var X=S[x],Ge=n(X,x);q=cr(et,c,ae,null,X,Ge,x,a,t),c.items.set(Ge,q),ae=q}y>0&&bt(Kt())}if(!Ae){var Ce=$r;Qr(S,c,o,a,t,(Ce.f&lt)!==0,n)}s!==null&&(y===0?h?sr(h):h=lr(()=>s(o)):h!==null&&Fr(h,()=>{h=null})),v&&xt(!0),r()}),Ae&&(o=et)}function Qr(e,t,r,n,a,s,o,c){var u=e.length,h=t.items,g=t.first,_=g,S,y=null,v=[],k=[],ae,q,x,X;for(X=0;X<u;X+=1){if(ae=e[X],q=o(ae,X),x=h.get(q),x===void 0){var Ge=_?_.e.nodes_start:r;y=cr(Ge,t,y,y===null?t.first:y.next,ae,q,X,n,a),h.set(q,y),v=[],k=[],_=y.next;continue}if(Jr(x,ae,X),x.e.f&lt&&sr(x.e),x!==_){if(S!==void 0&&S.has(x)){if(v.length<k.length){var Ce=k[0],D;y=Ce.prev;var W=v[0],ce=v[v.length-1];for(D=0;D<v.length;D+=1)Zt(v[D],Ce,r);for(D=0;D<k.length;D+=1)S.delete(k[D]);Re(t,W.prev,ce.next),Re(t,y,W),Re(t,ce,Ce),_=Ce,y=ce,X-=1,v=[],k=[]}else S.delete(x),Zt(x,_,r),Re(t,x.prev,x.next),Re(t,x,y===null?t.first:y.next),Re(t,y,x),y=x;continue}for(v=[],k=[];_!==null&&_.k!==q;)(s||!(_.e.f&lt))&&(S??(S=new Set)).add(_),k.push(_),_=_.next;if(_===null)continue;x=_}v.push(x),y=x,_=x.next}if(_!==null||S!==void 0){for(var Pe=S===void 0?[]:or(S);_!==null;)(s||!(_.e.f&lt))&&Pe.push(_),_=_.next;var ge=Pe.length;if(ge>0){var he=u===0?r:null;Zr(t,Pe,he,h)}}Wt.first=t.first&&t.first.e,Wt.last=y&&y.e}function Jr(e,t,r,n){Mr(e.v,t),e.i=r}function cr(e,t,r,n,a,s,o,c,u,h){var g=(u&Nr)!==0,_=(u&Br)===0,S=g?_?Ur(a):Yt(a):a,y=u&Lr?Yt(o):o,v={i:y,v:S,k:s,a:null,e:null,prev:r,next:n};try{return v.e=lr(()=>c(e,S,y),Ae),v.e.prev=r&&r.e,v.e.next=n&&n.e,r===null?t.first=v:(r.next=v,r.e.next=v.e),n!==null&&(n.prev=v,n.e.prev=v.e),v}finally{}}function Zt(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,a=t?t.e.nodes_start:r,s=e.e.nodes_start;s!==n;){var o=qr(s);a.before(s),s=o}}function Re(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Vr(e,t){var r=e.__attributes??(e.__attributes={});r.value===(r.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t)}function te(e,t,r,n){var a=e.__attributes??(e.__attributes={});Ae&&(a[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||a[t]!==(a[t]=r)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[Gr]=r),r==null?e.removeAttribute(t):typeof r!="string"&&en(e).includes(t)?e[t]=r:e.setAttribute(t,r))}var Qt=new Map;function en(e){var t=Qt.get(e.nodeName);if(t)return t;Qt.set(e.nodeName,t=[]);for(var r,n=e,a=Element.prototype;a!==n;){r=Hr(n);for(var s in r)r[s].set&&t.push(s);n=jr(n)}return t}function tn(e,t,r){if(r){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}function Ke(e,t,r,n){var a=e.__styles??(e.__styles={});a[t]!==r&&(a[t]=r,e.style.setProperty(t,r,""))}var rn=E('<button class="svelte-1vhyctd"><i class="material-icons md-36 svelte-1vhyctd"> </i></button>'),nn=E('<div class="svelte-1vhyctd"><!> <!></div>');function an(e,t){Dt(t,!0);let r=De(!1),n=De(null);const a=()=>{};let s=De(a),o=De(a),c=De(!1);Xr(()=>{I(o,()=>{(i(n).requestFullscreen||i(n).mozRequestFullScreen||i(n).webkitRequestFullscreen||i(n).msRequestFullscreen||a).bind(i(n))()}),I(s,Xt((document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen||a).bind(document))),I(c,!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"].forEach(k=>document.addEventListener(k,()=>{I(r,Xt(document.fullscreenElement)),console.log(`Fullscreen updated to ${i(r)?"ON":"OFF"}`)},!1));const v=document.createElement("link");return v.rel="stylesheet",v.href="https://fonts.googleapis.com/icon?family=Material+Icons",document.head.appendChild(v),()=>{v.parentNode.removeChild(v)}});const u=()=>{if(i(c)){if(i(r)&&!document.fullscreenElement){console.error("Fullscreen was out of sync"),I(r,!1);return}i(r)?i(s)():i(o)(i(n)),I(r,!i(r))}};let h=R(()=>i(r)?"fullscreen_exit":"fullscreen");var g=nn(),_=d(g);dr(_,()=>t.fullscreenable,()=>i(c),()=>i(r),()=>u);var S=f(_,2);{var y=v=>{var k=rn();k.__click=u;var ae=d(k),q=d(ae,!0);l(ae),l(k),C(()=>z(q,i(h))),m(v,k)};F(S,v=>{!t.fullscreenable&&i(c)&&v(y)})}l(g),Yr(g,v=>I(n,v),()=>i(n)),C(()=>tn(g,"isFull",i(r))),m(e,g),Ot()}ur(["click"]);const on=e=>Math.floor(Math.random()*e),sn=e=>e[on(e.length)],Y=(e,t,r)=>Math.min(r,Math.max(e,t)),ut=25,ln={core:{type:"core",components:["targeter","health"],title:"Core",description:"Processing, control, mechanical center"},bipedalLegs:{type:"bipedalLegs",components:["fuel","stance"],title:"Legs",description:"Stand, shift, and shuffle on two feet"},autopistol:{type:"autopistol",components:["autopistol","targeter"],title:"Gun",description:"Chk chk boom"},sword:{type:"sword",components:["sword","targeter","fuel"],title:"Sword",description:"Schwa-schwa-krang"},shield:{type:"shield",components:["shield","fuel"],title:"Shield",description:"A fancy name for a metal slab"},taser:{type:"taser",components:["targeter","taser","generator","battery"],title:"Taser",description:"Zzztt"},hackingModule:{type:"hackingModule",components:["targeter","hackingModule","hackingToggle","generator","battery"],title:"Taser",description:"Zzztt"}},tt=()=>({parentType:"resource",min:0,max:100,value:100,velocity:0,formatter:e=>Math.trunc(e)}),st=()=>({parentType:"sliderInput",min:0,max:100,value:100,formatter:e=>Math.trunc(e)}),un={fuel:{type:"fuel",...tt(),velocity:1},battery:{type:"battery",...tt(),max:1e3,value:200,velocity:-1},generator:{type:"generator",...st(),max:3,value:1,fuelCost:1,batteryGenerationAmount:1,chargeExponent:1.1},taser:{type:"taser",...st(),max:1,value:0,batteryCostRatio:16,damageScaleExponent:1e-4},health:{type:"health",...tt()},autopistol:{type:"autopistol",...tt(),max:3,costPerShot:3,powerPerShot:5,value:0,velocity:.01},sword:{type:"sword",parentType:"unique",costPerSwing:90,baseDamage:25,value:0,min:0,max:100,velocity:1,formatter:e=>Math.trunc(e),swinging:!1,ready:!1},shield:{type:"shield",parentType:"unique",costPer:90,value:0,min:0,max:100,velocity:1.6,totalUses:3,numUses:3,formatter:e=>Math.trunc(e),blocking:!1,blockedAt:null,blockDuration:ut*10},stance:{type:"stance",...st(),min:-1,max:1,value:0},targeter:{type:"targeter",parentType:"unique",targetEntityId:null},hackingModule:{type:"hackingModule",...tt(),value:0,max:100,velocity:0,progressPerCharge:1,chargeCost:16,phase:"scanning components",targetedComponentType:null,successChance:.8,resourceLossRatio:6},hackingToggle:{type:"hackingToggle",...st(),value:0,max:1}},A=(e,t,r)=>{e.log.push({timestamp:ke(),entry:r,level:t}),console.log("Log",e.log.at(-1))},dn=e=>{const t=e.round.state;if(t!=="occurring"&&t!=="paused"){console.error("Paused when round not playing");return}e.round=t==="occurring"?{state:"paused"}:{state:"occurring"}},cn=()=>{const e=ke();return{mostRecentUpdate:e,round:{state:"not yet started"},log:[],inputChanges:[],remainingLag:0,gameStartedTime:e,entities:[],components:[],parts:[],optimistic:[]}},fn=(e,t,r)=>{const n=e.components.find(a=>a.entityId===t&&a.type===r);if(n)return pr(n,r)},L=(e,t,r)=>{const n=e.components.find(a=>a.entityId===t&&a.type===r);if(!n){const a=Ye(e,t);throw new Error(`${r}' required for '${a==null?void 0:a.debug}' (${a==null?void 0:a.entityId})`)}return pr(n,r)},Ye=(e,t)=>{let r=e.entities.find(n=>n.entityId===t);return r||(r={debug:"Unknown entity",entityId:-1}),r},ke=()=>Math.trunc(performance.now()),fr=e=>{const t=ke();return{...e,round:{state:"occurring"},log:[],gameStartedTime:t,mostRecentUpdate:t}};let vn=0;const Jt=(e,t)=>{let r=vn++;return e.entities.push({entityId:r,debug:t}),r},rt=(e,t,r)=>{const n=ln[r];e.parts.push({...n,entityId:t}),n.components.forEach(a=>{vr(e,t,a)})},pn=(e,t,r)=>{e.parts=e.parts.filter(n=>!(t===n.entityId&&r===n.type)),yn(e,t)},yn=(e,t)=>{e.components=e.components.filter(r=>r.entityId!==t),e.parts.filter(r=>r.entityId===t).forEach(r=>r.components.forEach(n=>{vr(e,r.entityId,n)}))},vr=(e,t,r)=>{{let n=un[r];if(e.components.find(s=>s.entityId===t&&s.type==r))return;let a={...n,entityId:t};e.components.push(a)}};function pr(e,t){if(!e)throw new Error;if(e.type!==t)throw Error(`expected tag ${t} but was ${e.type}`);return e}const Pt=(e,t)=>{e.inputChanges.push(t)},_n=e=>{const r=ke()-e.mostRecentUpdate;e.mostRecentUpdate=ke(),e.remainingLag+=r;let n=0;for(;e.remainingLag>=ut;)if(gn(e),n++,e.remainingLag-=ut,n>100){A(e,"debug","Lag recovery spinout");break}n>1&&A(e,"debug",`Updated ${n} times to recover from lag`);const a=e.remainingLag/ut;hn(e,a)},mn=(e,t,r)=>{t&&(e.round={state:"over",reason:r})},It=(e,t,r,n)=>{const a=Ye(e,t);let s="no memo";switch(n.type){case"attack":s=`damaged by ${Ye(e,n.from).debug}'s ${n.with}`;break;case"self":s="self-damaged";break;default:throw new Error("Unknown attack type")}const o=fn(e,t,"shield");if(o&&o.blockedAt!==null&&o.blockedAt+o.blockDuration>=ke()){A(e,"debug",`${a.debug} almost '${r}' damage, ${s}, but BLOCKED IT!`),o.blockedAt=null;return}const c=L(e,t,"health");c.value=Y(c.value-r,c.min,c.max),A(e,"debug",`${a.debug} took '${r}' damage, ${s}`),mn(e,c.value<=0,`${a.debug}'s health depleted`)},gn=e=>{for(;e.inputChanges.length>0;){const t=e.inputChanges.shift(),r=L(e,t.entityId,t.type);if(!r)throw new Error;if(r.parentType==="sliderInput")r.value=Y(t.value,r.min,r.max);else if(r.type==="targeter")r.targetEntityId=t.value;else if(r.type==="sword")r.swinging=!0;else if(r.type==="shield")r.blocking=!0;else throw new Error(`Unhandled input type '${t.type}'`);A(e,"debug",`Updated ${t.type} to value ${t.value}`)}e.round.state==="occurring"&&e.components.forEach(t=>{switch(t.parentType){case"resource":{switch(t.type){case"autopistol":{if(t.value<t.costPerShot)break;t.value=t.value-t.costPerShot;const r=L(e,t.entityId,"targeter");if(r.targetEntityId===null)break;It(e,r.targetEntityId,t.powerPerShot,{type:"attack",from:t.entityId,with:t.type})}break;case"hackingModule":{if(L(e,t.entityId,"hackingToggle").value===0)break;const n=L(e,t.entityId,"battery");if(n.value<t.chargeCost||(n.value=Y(n.value-t.chargeCost,n.min,n.max),t.value=Y(t.value+t.progressPerCharge,t.min,t.max),t.value<t.max))break;t.value=t.min;let a=!1;const s=L(e,t.entityId,"targeter");if(s.targetEntityId===null)break;if(t.phase==="attempting to disable")if(t.targetedComponentType===null)A(e,"debug","hacking module target was null when attempting to disable"),t.phase="scanning components";else{const o=L(e,s.targetEntityId,t.targetedComponentType);if(!o)A(e,"debug","hacking module target was unavailable when attempting to disable"),t.phase="scanning components";else{const c=Math.random()>t.successChance;switch(o.parentType){case"sliderInput":case"resource":if(c){const u=o.max-o.min,h=o.value;o.value=Y(o.value-Math.ceil(u/t.resourceLossRatio),o.min,o.max);const g=o.value;A(e,"debug",`Successfully hacked (${h}->${g}) module type '${o.type}'`)}else A(e,"debug",`Failed to hack module type '${o.type}'`);t.phase="scanning components",t.targetedComponentType=null,a=!0;break;default:A(e,"debug",`hacking module target type '${o.type}' unhackable`),t.phase="scanning components",t.targetedComponentType=null;break}}}if(t.phase==="scanning components"&&!a){const o=e.components.filter(u=>u.entityId===s.targetEntityId&&(u.parentType==="resource"||u.parentType==="sliderInput"));t.targetedComponentType=sn(o).type;const c=Ye(e,s.targetEntityId);t.phase="attempting to disable",A(e,"debug",`hacking module targeted ${c.debug}'s '${t.targetedComponentType}'`),a=!0}a||A(e,"debug","hacking module did nothing")}break}t.value=Y(t.value+t.velocity,t.min,t.max)}break;case"sliderInput":switch(t.type){case"taser":{if(t.value<=0)break;const a=L(e,t.entityId,"battery"),s=a.value;if(a.value==null)break;a.value=Y(a.value-t.batteryCostRatio*t.value,a.min,a.max);const o=s-a.value,c=L(e,t.entityId,"targeter");if(c.targetEntityId===null)break;It(e,c.targetEntityId,o**t.damageScaleExponent,{type:"attack",from:t.entityId,with:t.type})}break;case"generator":const r=L(e,t.entityId,"fuel"),n=L(e,t.entityId,"battery");for(let a=0;a<t.value;a++){if(r.value<t.fuelCost)return;r.value=Y(r.value-t.fuelCost,r.min,r.max),n.value=Y(n.value+t.batteryGenerationAmount*(a+1)**t.chargeExponent,n.min,n.max)}break}break;case"unique":switch(t.type){case"sword":{const r=t.swinging;if(t.swinging=!1,t.value=Y(t.value+t.velocity,t.min,t.max),t.ready=!0,t.value<t.max){r&&A(e,"debug","Swing attempted before sword was ready"),t.ready=!1;break}const n=L(e,t.entityId,"fuel");if(n.value<t.costPerSwing){r&&A(e,"debug","Swing attempted before fuel cost satisfied"),t.ready=!1;break}const a=L(e,t.entityId,"targeter");if(a.targetEntityId===null){r&&A(e,"debug","Swing attempted but no target"),t.ready=!1;break}if(!r)break;n.value-=t.costPerSwing,t.value=t.min,It(e,a.targetEntityId,t.baseDamage,{type:"attack",from:t.entityId,with:t.type})}break;case"shield":{if(t.value=Y(t.value+t.velocity,t.min,t.max),!t.blocking)break;if(t.blocking=!1,t.value<t.max){A(e,"debug","Block attempted before shield was ready");break}const r=L(e,t.entityId,"fuel");if(r.value<t.costPer){A(e,"debug","Block attempted before fuel cost satisfied");break}if(t.numUses<=0){A(e,"debug","Block attempted but no remaining uses");break}r.value-=t.costPer,t.value=t.min,t.numUses--,t.blockedAt=ke()}break}}})},hn=(e,t)=>{e.optimistic={...e.components},Object.entries(e.optimistic).forEach(([r,n])=>{const{parentType:a}=n;switch(a){case"resource":n.value=Y(n.value+n.velocity*t,n.min,n.max);break}})};var bn=E('<meter style="will-change: contents;width: 2em;"> </meter>');function Me(e,t){const r=R(()=>t.component.min),n=R(()=>t.component.max),a=R(()=>t.component.value);let s=R(()=>i(n)-i(r));var o=bn(),c=d(o);l(o),C(()=>{te(o,"min",i(r)),te(o,"low",i(s)/2.5+i(r)),te(o,"high",i(s)*99/100+i(r)),te(o,"optimum",i(s)*99.9/100+i(r)),te(o,"max",i(n)),Vr(o,i(a)),z(c,`${i(a)??""} of ${i(n)??""}`)}),m(e,o)}var xn=E('<div style="padding: 1em; border: 2px outset;"><!></div>');function We(e,t){Dt(t,!0);const r=R(()=>L(t.game,t.entityId,t.type));var n=xn(),a=d(n);dr(a,()=>t.render,()=>i(r),()=>t.entityId,()=>t.type),l(n),m(e,n),Ot()}var yr=Symbol.for("immer-nothing"),Vt=Symbol.for("immer-draftable"),re=Symbol.for("immer-state");function me(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Xe=Object.getPrototypeOf;function Ze(e){return!!e&&!!e[re]}function Be(e){var t;return e?_r(e)||Array.isArray(e)||!!e[Vt]||!!((t=e.constructor)!=null&&t[Vt])||yt(e)||_t(e):!1}var wn=Object.prototype.constructor.toString();function _r(e){if(!e||typeof e!="object")return!1;const t=Xe(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===wn}function ct(e,t){pt(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function pt(e){const t=e[re];return t?t.type_:Array.isArray(e)?1:yt(e)?2:_t(e)?3:0}function St(e,t){return pt(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function mr(e,t,r){const n=pt(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function kn(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function yt(e){return e instanceof Map}function _t(e){return e instanceof Set}function Ne(e){return e.copy_||e.base_}function Tt(e,t){if(yt(e))return new Map(e);if(_t(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=_r(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[re];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],c=n[o];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(n[o]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[o]})}return Object.create(Xe(e),n)}else{const n=Xe(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function $t(e,t=!1){return mt(e)||Ze(e)||!Be(e)||(pt(e)>1&&(e.set=e.add=e.clear=e.delete=Pn),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>$t(n,!0))),e}function Pn(){me(2)}function mt(e){return Object.isFrozen(e)}var In={};function qe(e){const t=In[e];return t||me(0,e),t}var nt;function gr(){return nt}function En(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function er(e,t){t&&(qe("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ft(e){Mt(e),e.drafts_.forEach(zn),e.drafts_=null}function Mt(e){e===nt&&(nt=e.parent_)}function tr(e){return nt=En(nt,e)}function zn(e){const t=e[re];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function rr(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[re].modified_&&(Ft(t),me(4)),Be(e)&&(e=ft(t,e),t.parent_||vt(t,e)),t.patches_&&qe("Patches").generateReplacementPatches_(r[re].base_,e,t.patches_,t.inversePatches_)):e=ft(t,r,[]),Ft(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==yr?e:void 0}function ft(e,t,r){if(mt(t))return t;const n=t[re];if(!n)return ct(t,(a,s)=>nr(e,n,t,a,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return vt(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let s=a,o=!1;n.type_===3&&(s=new Set(a),a.clear(),o=!0),ct(s,(c,u)=>nr(e,n,a,c,u,r,o)),vt(e,a,!1),r&&e.patches_&&qe("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function nr(e,t,r,n,a,s,o){if(Ze(a)){const c=s&&t&&t.type_!==3&&!St(t.assigned_,n)?s.concat(n):void 0,u=ft(e,a,c);if(mr(r,n,u),Ze(u))e.canAutoFreeze_=!1;else return}else o&&r.add(a);if(Be(a)&&!mt(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ft(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&vt(e,a)}}function vt(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&$t(t,r)}function Cn(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:gr(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=Ut;r&&(a=[n],s=at);const{revoke:o,proxy:c}=Proxy.revocable(a,s);return n.draft_=c,n.revoke_=o,c}var Ut={get(e,t){if(t===re)return e;const r=Ne(e);if(!St(r,t))return Sn(e,r,t);const n=r[t];return e.finalized_||!Be(n)?n:n===Et(e.base_,t)?(zt(e),e.copy_[t]=Rt(n,e)):n},has(e,t){return t in Ne(e)},ownKeys(e){return Reflect.ownKeys(Ne(e))},set(e,t,r){const n=hr(Ne(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=Et(Ne(e),t),s=a==null?void 0:a[re];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(kn(r,a)&&(r!==void 0||St(e.base_,t)))return!0;zt(e),At(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Et(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,zt(e),At(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Ne(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){me(11)},getPrototypeOf(e){return Xe(e.base_)},setPrototypeOf(){me(12)}},at={};ct(Ut,(e,t)=>{at[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});at.deleteProperty=function(e,t){return at.set.call(this,e,t,void 0)};at.set=function(e,t,r){return Ut.set.call(this,e[0],t,r,e[0])};function Et(e,t){const r=e[re];return(r?Ne(r):e)[t]}function Sn(e,t,r){var a;const n=hr(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function hr(e,t){if(!(t in e))return;let r=Xe(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Xe(r)}}function At(e){e.modified_||(e.modified_=!0,e.parent_&&At(e.parent_))}function zt(e){e.copy_||(e.copy_=Tt(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Tn=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const o=this;return function(u=s,...h){return o.produce(u,g=>r.call(this,g,...h))}}typeof r!="function"&&me(6),n!==void 0&&typeof n!="function"&&me(7);let a;if(Be(t)){const s=tr(this),o=Rt(t,void 0);let c=!0;try{a=r(o),c=!1}finally{c?Ft(s):Mt(s)}return er(s,n),rr(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===yr&&(a=void 0),this.autoFreeze_&&$t(a,!0),n){const s=[],o=[];qe("Patches").generateReplacementPatches_(t,a,s,o),n(s,o)}return a}else me(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...c)=>this.produceWithPatches(o,u=>t(u,...c));let n,a;return[this.produce(t,r,(o,c)=>{n=o,a=c}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Be(e)||me(8),Ze(e)&&(e=Fn(e));const t=tr(this),r=Rt(e,void 0);return r[re].isManual_=!0,Mt(t),r}finishDraft(e,t){const r=e&&e[re];(!r||!r.isManual_)&&me(9);const{scope_:n}=r;return er(n,t),rr(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=qe("Patches").applyPatches_;return Ze(e)?n(e,t):this.produce(e,a=>n(a,t))}};function Rt(e,t){const r=yt(e)?qe("MapSet").proxyMap_(e,t):_t(e)?qe("MapSet").proxySet_(e,t):Cn(e,t);return(t?t.scope_:gr()).drafts_.push(r),r}function Fn(e){return Ze(e)||me(10,e),br(e)}function br(e){if(!Be(e)||mt(e))return e;const t=e[re];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Tt(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Tt(e,!0);return ct(r,(n,a)=>{mr(r,n,br(a))}),t&&(t.finalized_=!1),r}var ne=new Tn,dt=ne.produce;ne.produceWithPatches.bind(ne);ne.setAutoFreeze.bind(ne);ne.setUseStrictShallowCopy.bind(ne);ne.applyPatches.bind(ne);ne.createDraft.bind(ne);ne.finishDraft.bind(ne);const Mn=(e,t,r)=>{I(t,"inventory"),I(r,!1)},An=(e,t,r)=>{I(t,"store"),I(r,!1)},Rn=(e,t,r,n)=>{I(t,fr(r)),I(n,!0)},ar=(e,t,r)=>{I(t,"play"),I(r,!0)},Ct=(e,t,r)=>{I(t,"entry"),I(r,!1)},ir=(e,t)=>{I(t,dt(i(t),r=>{dn(r)}))};var Dn=E('<a href="?"> </a>'),On=E("<div><!></div>"),$n=E(`<div style="display: flex; flex-direction: column; justify-content: start;
        align-items: flex-start; padding-bottom: 4em; gap:2em;"><div><h1 class="svelte-1tzfz4t">Pilots</h1> <h2 class="svelte-1tzfz4t">A game about ...?</h2></div> <div><a href="?">Cockpit</a></div> <div><a href="?">Shop</a></div> <div><a href="?">Inventory</a></div> <!> <div><a href="/design">Design notes</a></div></div>`),Un=E('<p><a href="?">Begin</a></p>'),Ln=E('<p>Paused. <a href="?">Unpause</a></p>'),Nn=E('<div style="will-change: contents"> <!></div>'),Bn=E('<div style="display: grid; grid-template-columns: 1fr 1fr; justify-items: flex-end;"><div>Auto Pistol Cooldown</div> <svg style="height: 3em;"><circle style="fill: var(--color-fg)"></circle><circle style="fill: var(--color-bg)"></circle></svg></div>'),qn=E('<div>Health</div> <div style="will-change: contents"> <!></div>',1),Gn=E('<div style="will-change: contents"> <!></div>'),jn=E(`<div style="width: 100%; height: 100%; display: grid;
                      grid-template-columns: min-content min-content;
                       justify-content: space-between; grid-template-rows:
                       max-content;"><div><div>Sword</div> <label style="display: flex; flex-direction: row; justify-content: space-between; gap: 0.4em">Cooldown <!></label> <label style="display: flex; flex-direction: row; justify-content: space-between; gap: 0.4em">Fuel cost <!></label></div> <button>Swing</button></div>`),Hn=E(`<div style="width: 100%; height: 100%; display: grid;
                      grid-template-columns: min-content min-content;
                       justify-content: space-between; grid-template-rows:
                       max-content;"><div><div>Shield</div> <label style="display: flex; flex-direction: row; justify-content: space-between; gap: 0.4em">Cooldown <!></label> <label style="display: flex; flex-direction: row; justify-content: space-between; gap: 0.4em">Fuel cost <!></label> <label style="display: flex; flex-direction: row; justify-content: space-between; gap: 0.4em"> <!></label></div> <button style="border-radius: 9999px; border: 4px inset lightsteelblue; background-color: lightsteelblue; padding: 1em; display: block; aspect-ratio:1;">Block</button></div>`),Kn=E('<!> <div style="box-sizing: border-box;  border:4px inset; border-radius: 1.9em; margin: 0.4em;"><div style="box-sizing: border-box;  border:4px inset; border-radius: 1.9em;"><div style="box-sizing: border-box;  border:4px inset; border-radius: 1.9em;"><div style="box-sizing: border-box;  border:4px inset; border-radius: 1.9em;"><div style="border:4px inset; border-radius: 1.9em; padding: 0.4em;"><h2 class="svelte-1tzfz4t">Enemy</h2> <div style="display: grid; grid-template-columns: 1fr 1fr;"><!> <!></div></div></div></div></div></div> <div style="width:100%; overflow-y: scroll;"><h2 class="svelte-1tzfz4t">Player</h2> <div style="display: grid; grid-template-columns: 1fr 1fr;"><!> <!> <!> <!></div></div>',1),Wn=E('<h2 class="svelte-1tzfz4t">Game over</h2> <p> </p>',1),Yn=E('<div><!></div> <nav class="svelte-1tzfz4t"><a href="?">Restart</a> <a href="?">Back To Title</a> <!> <a href="?"> </a></nav>',1),Xn=E('<div style="display: flex; flex-direction: column; gap: 1em; border: 2px outset; padding-inline: 0.4em; padding-block: 0.4em;"><div style="display: flex; gap: 1em; flex-direction: row;"><div style="width: 30%; font-size: 1.4em"> </div> <div> </div></div> <div> <span> </span></div></div>'),Zn=E('<div style="display: flex; flex-direction: column; gap: 1em; border: 2px outset; padding-inline: 0.4em; padding-block: 0.4em;"><div style="display: flex; gap: 1em; flex-direction: row;"><div style="width: 30%; font-size: 1.4em"> </div> <div> </div></div> <div> <span> </span></div></div>'),Qn=E(`<h2 class="svelte-1tzfz4t"> </h2> <p style="padding-inline: 4em">This is your inventory where you can see your current parts. You can also rearrange your
        parts to maximize their effectiveness</p> <div style="display: flex; flex-direction: column; gap: 0.4em;"></div> <h2 class="svelte-1tzfz4t"> </h2> <p style="padding-inline: 4em">This is your enemy's inventory. Do you see what you're up against?</p> <div style="display: flex; flex-direction: column; gap: 0.4em;"></div> <nav class="svelte-1tzfz4t"><a href="?">Back To Cockpit</a> <a href="?">Back To Title</a> <!></nav>`,1),Jn=(e,t,r)=>t(i(r)),Vn=E('<div style="display: flex; flex-direction: column; gap: 1em; border: 2px outset; padding-inline: 0.4em; padding-block: 0.4em;"><div style="display: flex; gap: 1em; flex-direction: row;"><div style="width: 30%; font-size: 1.4em"> </div> <div> </div></div> <div> <span> </span></div> <button>Sell</button></div>'),ea=E('<h2 class="svelte-1tzfz4t">The Shop</h2> <p style="padding-inline: 4em">Buy more stuff here.</p> <div style="display: flex; flex-direction: column; gap: 0.4em;"></div> <nav class="svelte-1tzfz4t"><a href="?">Back To Cockpit</a> <a href="?">Back To Title</a> <!></nav>',1),ta=E(`<main style="height: 100%; display: grid; grid-template-rows: 1fr max-content;
    justify-items: center; align-items: center; box-sizing: border-box; "><!></main>`);function la(e,t){Dt(t,!0);const r=(y,v=_e,k=_e,ae=_e)=>{var q=ta();const x=D=>{var W=Dn();W.__click=function(...Pe){var ge;(ge=ae())==null||ge.apply(this,Pe)};var ce=d(W,!0);l(W),C(()=>z(ce,k()?"Exit Fullscreen":"Fullscreen")),m(D,W)};var X=d(q);{var Ge=D=>{var W=$n(),ce=f(d(W),2),Pe=d(ce);Pe.__click=_,l(ce);var ge=f(ce,2),he=d(ge);he.__click=[An,g,h],l(ge);var Ie=f(ge,2),Oe=d(Ie);Oe.__click=[Mn,g,h],l(Ie);var Qe=f(Ie,2);{var Je=ie=>{var oe=On(),be=d(oe);x(be),l(oe),m(ie,oe)};F(Qe,ie=>{v()&&ie(Je)})}Wr(2),l(W),m(D,W)},Ce=D=>{var W=ye(),ce=U(W);{var Pe=he=>{var Ie=Yn(),Oe=U(Ie),Qe=d(Oe);{var Je=N=>{var se=Un(),Fe=d(se);Fe.__click=_,l(se),m(N,se)},ie=N=>{var se=ye(),Fe=U(se);{var Ve=P=>{var T=Kn(),B=U(T);{var G=ze=>{var j=Ln(),p=f(d(j));p.__click=[ir,u],l(j),m(ze,j)};F(B,ze=>{i(u).round.state==="paused"&&ze(G)})}var O=f(B,2),le=d(O),Z=d(le),Q=d(Z),J=d(Q),ue=f(d(J),2),de=d(ue);We(de,{get game(){return i(u)},entityId:c,type:"health",render:(j,p=_e)=>{var H=ye(),V=U(H);{var K=w=>{},ve=w=>{var M=Nn(),b=d(M);C(()=>z(b,`Health ${p().formatter(p().value)??""}/${p().max??""} `));var $=f(b);Me($,{get component(){return p()}}),l(M),m(w,M)};F(V,w=>{p()?w(ve,!1):w(K)})}m(j,H)},$$slots:{render:!0}});var $e=f(de,2);We($e,{get game(){return i(u)},entityId:c,type:"autopistol",render:(j,p=_e)=>{var H=ye(),V=U(H);{var K=w=>{},ve=w=>{var M=Bn();const b=R(()=>({view:{xMin:0,yMin:0,xMax:100,yMax:100}})),$=R(()=>(i(b).view.xMax-i(b).view.xMin)/2),ee=R(()=>(i(b).view.yMax-i(b).view.yMin)/2),we=R(()=>i(ee)+i(b).view.xMin);var Ue=f(d(M),2);C(()=>te(Ue,"viewBox",[i(b).view.xMin,i(b).view.yMin,i(b).view.xMax,i(b).view.yMax].join(" ")));var pe=d(Ue),Le=f(pe);l(Ue),l(M),C(()=>{te(pe,"cx",i($)),te(pe,"cy",i(ee)),te(pe,"r",i(we)),te(Le,"cx",i($)),te(Le,"cy",i(ee)),te(Le,"r",p().value/p().max*i(we))}),m(w,M)};F(V,w=>{p()?w(ve,!1):w(K)})}m(j,H)},$$slots:{render:!0}}),l(ue),l(J),l(Q),l(Z),l(le),l(O);var Lt=f(O,2),Nt=f(d(Lt),2),Bt=d(Nt);We(Bt,{get game(){return i(u)},entityId:o,type:"health",render:(j,p=_e)=>{var H=ye(),V=U(H);{var K=w=>{},ve=w=>{var M=qn(),b=f(U(M),2),$=d(b);C(()=>z($,`${p().formatter(p().value)??""}/${p().max??""} `));var ee=f($);Me(ee,{get component(){return p()}}),l(b),m(w,M)};F(V,w=>{p()?w(ve,!1):w(K)})}m(j,H)},$$slots:{render:!0}});var qt=f(Bt,2);We(qt,{get game(){return i(u)},entityId:o,type:"fuel",render:(j,p=_e)=>{var H=ye(),V=U(H);{var K=w=>{},ve=w=>{var M=Gn(),b=d(M);C(()=>z(b,`Fuel ${p().formatter(p().value)??""}/${p().max??""} `));var $=f(b);Me($,{get component(){return p()}}),l(M),m(w,M)};F(V,w=>{p()?w(ve,!1):w(K)})}m(j,H)},$$slots:{render:!0}});var Gt=f(qt,2);We(Gt,{get game(){return i(u)},entityId:o,type:"sword",render:(j,p=_e,H=_e)=>{var V=ye();const K=R(()=>L(i(u),H(),"fuel"));var ve=U(V);{var w=b=>{},M=b=>{var $=jn(),ee=d($),we=f(d(ee),2),Ue=f(d(we));Me(Ue,{get component(){return p()}}),l(we);var pe=f(we,2),Le=f(d(pe)),gt=R(()=>({min:i(K).min,max:p().costPerSwing,value:Y(i(K).value,i(K).min,p().costPerSwing)}));Me(Le,{get component(){return i(gt)}}),l(pe),l(ee);var He=f(ee,2),it=R(()=>n(p().type));He.__click=function(...ht){var ot;(ot=i(it))==null||ot.apply(this,ht)},l($),C(()=>{He.disabled=p().swinging,te(He,"style",`border-radius: 9999px; border: 4px inset tomato; background-color: ${(p().ready?"tomato":"darkorange")??""}; padding: 1em; display: block; aspect-ratio:1;`)}),m(b,$)};F(ve,b=>{p()?b(M,!1):b(w)})}m(j,V)},$$slots:{render:!0}});var xr=f(Gt,2);We(xr,{get game(){return i(u)},entityId:o,type:"shield",render:(j,p=_e,H=_e)=>{var V=ye();const K=R(()=>L(i(u),H(),"fuel"));var ve=U(V);{var w=b=>{},M=b=>{var $=Hn(),ee=d($),we=f(d(ee),2),Ue=f(d(we));Me(Ue,{get component(){return p()}}),l(we);var pe=f(we,2),Le=f(d(pe)),gt=R(()=>({min:i(K).min,max:p().costPer,value:Y(i(K).value,i(K).min,p().costPer)}));Me(Le,{get component(){return i(gt)}}),l(pe);var He=f(pe,2),it=d(He),ht=f(it),ot=R(()=>({min:0,max:p().totalUses,value:p().numUses}));Me(ht,{get component(){return i(ot)}}),l(He),l(ee);var jt=f(ee,2),wr=R(()=>n(p().type));jt.__click=function(...kr){var Ht;(Ht=i(wr))==null||Ht.apply(this,kr)},l($),C(()=>{z(it,`${p().numUses??""}/${p().totalUses??""} `),jt.disabled=p().blocking}),m(b,$)};F(ve,b=>{p()?b(M,!1):b(w)})}m(j,V)},$$slots:{render:!0}}),l(Nt),l(Lt),m(P,T)},fe=P=>{var T=ye(),B=U(T);{var G=O=>{var le=Wn(),Z=f(U(le),2),Q=d(Z);l(Z),C(()=>z(Q,`Reason: ${i(u).round.reason??""}`)),m(O,le)};F(B,O=>{i(u).round.state==="over"&&O(G)},!0)}m(P,T)};F(Fe,P=>{i(u).round.state==="occurring"||i(u).round.state==="paused"?P(Ve):P(fe,!1)},!0)}m(N,se)};F(Qe,N=>{i(u).round.state==="not yet started"?N(Je):N(ie,!1)})}l(Oe);var oe=f(Oe,2),be=d(oe);be.__click=[Rn,u,s,h];var je=f(be,2);je.__click=[Ct,g,h];var xe=f(je,2);{var Se=N=>{x(N)};F(xe,N=>{v()&&N(Se)})}var Ee=f(xe,2);Ee.__click=[ir,u];var Te=d(Ee,!0);l(Ee),l(oe),C(()=>z(Te,i(S)?"Unpause (Paused)":"Pause")),m(he,Ie)},ge=he=>{var Ie=ye(),Oe=U(Ie);{var Qe=ie=>{var oe=Qn(),be=U(oe),je=d(be);C(()=>z(je,`${Ye(i(u),o).debug??""}'s Inventory`)),l(be);var xe=f(be,4);kt(xe,21,()=>i(u).parts.filter(({entityId:P})=>P===o),wt,(P,T)=>{var B=Xn(),G=d(B),O=d(G),le=d(O,!0);l(O);var Z=f(O,2),Q=d(Z,!0);l(Z),l(G);var J=f(G,2);Ke(J,"font-size","0.8em");var ue=d(J),de=f(ue);Ke(de,"font-size","0.8em");var $e=d(de,!0);C(()=>z($e,i(T).components.join(" "))),l(de),l(J),l(B),C(()=>{z(le,i(T).title),z(Q,i(T).description),z(ue,`${i(T).type??""} `)}),m(P,B)}),l(xe);var Se=f(xe,2),Ee=d(Se);C(()=>z(Ee,`${Ye(i(u),c).debug??""}'s Inventory`)),l(Se);var Te=f(Se,4);kt(Te,21,()=>i(u).parts.filter(({entityId:P})=>P===c),wt,(P,T)=>{var B=Zn(),G=d(B),O=d(G),le=d(O,!0);l(O);var Z=f(O,2),Q=d(Z,!0);l(Z),l(G);var J=f(G,2);Ke(J,"font-size","0.8em");var ue=d(J),de=f(ue);Ke(de,"font-size","0.8em");var $e=d(de,!0);C(()=>z($e,i(T).components.join(" "))),l(de),l(J),l(B),C(()=>{z(le,i(T).title),z(Q,i(T).description),z(ue,`${i(T).type??""} `)}),m(P,B)}),l(Te);var N=f(Te,2),se=d(N);se.__click=[ar,g,h];var Fe=f(se,2);Fe.__click=[Ct,g,h];var Ve=f(Fe,2);{var fe=P=>{x(P)};F(Ve,P=>{v()&&P(fe)})}l(N),m(ie,oe)},Je=ie=>{var oe=ye(),be=U(oe);{var je=xe=>{var Se=ea(),Ee=f(U(Se),4);kt(Ee,21,()=>i(u).parts.filter(({entityId:fe})=>fe===o),wt,(fe,P)=>{var T=Vn(),B=d(T),G=d(B),O=d(G,!0);l(G);var le=f(G,2),Z=d(le,!0);l(le),l(B);var Q=f(B,2);Ke(Q,"font-size","0.8em");var J=d(Q),ue=f(J);Ke(ue,"font-size","0.8em");var de=d(ue,!0);C(()=>z(de,i(P).components.join(" "))),l(ue),l(Q);var $e=f(Q,2);$e.__click=[Jn,a,P],l(T),C(()=>{z(O,i(P).title),z(Z,i(P).description),z(J,`${i(P).type??""} `)}),m(fe,T)}),l(Ee);var Te=f(Ee,2),N=d(Te);N.__click=[ar,g,h];var se=f(N,2);se.__click=[Ct,g,h];var Fe=f(se,2);{var Ve=fe=>{x(fe)};F(Fe,fe=>{v()&&fe(Ve)})}l(Te),m(xe,Se)};F(be,xe=>{i(g)==="store"&&xe(je)},!0)}m(ie,oe)};F(Oe,ie=>{i(g)==="inventory"?ie(Qe):ie(Je,!1)},!0)}m(he,Ie)};F(ce,he=>{i(g)==="play"?he(Pe):he(ge,!1)},!0)}m(D,W)};F(X,D=>{i(g)==="entry"?D(Ge):D(Ce,!1)})}l(q),m(y,q)},n=y=>v=>{I(u,dt(i(u),k=>{Pt(k,{entityId:o,type:y,value:"buttonPressed",time:ke()})}))},a=y=>{I(u,dt(i(u),v=>{pn(v,y.entityId,y.type)}))},s=cn(),o=Jt(s,"Player");rt(s,o,"core"),rt(s,o,"sword"),rt(s,o,"shield");const c=Jt(s,"Enemy");rt(s,c,"core"),rt(s,c,"autopistol"),Pt(s,{entityId:o,type:"targeter",value:c,time:ke()}),Pt(s,{entityId:c,type:"targeter",value:o,time:ke()});let u=De(s),h=De(!1);Kr(()=>{let y=!1;const v=()=>{i(h)&&I(u,dt(i(u),k=>{_n(k)})),y||requestAnimationFrame(v)};return requestAnimationFrame(v),()=>{y=!0}});let g=De("entry");const _=()=>{I(g,"play"),I(u,fr(s)),I(h,!0)};_();const S=R(()=>i(u).round.state==="paused");an(e,{fullscreenable:r}),Ot()}ur(["click"]);export{la as component};
