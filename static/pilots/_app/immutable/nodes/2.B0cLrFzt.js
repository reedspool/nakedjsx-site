import{a as b,t as C,c as Be}from"../chunks/disclose-version.Chs3MZKY.js";import{h as fe,C as lt,Q as ar,a0 as ir,A as sr,b as or,z as lr,_ as Gt,H as ur,B as Pt,D as ut,c as Ue,W as cr,as as Ke,F as Ht,a as Yt,G as fr,w as It,at as dr,au as vr,Z as _r,av as yr,d as pr,O as hr,an as mr,s as Tt,aw as gr,ax as br,ay as xr,T as kr,az as wr,aA as Er,y as Pr,aB as Ir,p as Wt,a6 as A,i as Kt,r as I,v as i,ar as ge,a7 as d,a9 as _,a8 as c,a5 as Te,u as Tr,n as Ct,g as ee}from"../chunks/runtime.CSRt9162.js";import{d as Zt,s as m}from"../chunks/render.DcD97Zrb.js";import{i as ue,b as Cr,p as Sr}from"../chunks/this.BO0ZuxZE.js";import{s as Fr}from"../chunks/snippet.CJ2BZSP8.js";import{o as zr}from"../chunks/index-client.DfJaYR9E.js";let St=!1;function Ar(){St||(St=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function Me(e,t){return t}function Mr(e,t,r,n){for(var a=[],s=t.length,o=0;o<s;o++)vr(t[o].e,a,!0);var l=s>0&&a.length===0&&r!==null;if(l){var u=r.parentNode;_r(u),u.append(r),n.clear(),me(e,t[0].prev,t[s-1].next)}yr(a,()=>{for(var g=0;g<s;g++){var x=t[g];l||(n.delete(x.k),me(e,x.prev,x.next)),pr(x.e,!l)}})}function Re(e,t,r,n,a,s=null){var o=e,l={flags:t,items:new Map,first:null};{var u=e;o=fe?lt(ar(u)):u.appendChild(ir())}fe&&sr();var g=null,x=!1;or(()=>{var p=r(),T=lr(p)?p:p==null?[]:Gt(p),y=T.length;if(x&&y===0)return;x=y===0;let f=!1;if(fe){var P=o.data===ur;P!==(y===0)&&(o=Pt(),lt(o),ut(!1),f=!0)}if(fe){for(var k=null,w,h=0;h<y;h++){if(Ue.nodeType===8&&Ue.data===cr){o=Ue,f=!0,ut(!1);break}var M=T[h],ze=n(M,h);w=Xt(Ue,l,k,null,M,ze,h,a,t),l.items.set(ze,w),k=w}y>0&&lt(Pt())}if(!fe){var de=hr;Rr(T,l,o,a,t,(de.f&Ke)!==0,n)}s!==null&&(y===0?g?Ht(g):g=Yt(()=>s(o)):g!==null&&fr(g,()=>{g=null})),f&&ut(!0),r()}),fe&&(o=Ue)}function Rr(e,t,r,n,a,s,o,l){var u=e.length,g=t.items,x=t.first,p=x,T,y=null,f=[],P=[],k,w,h,M;for(M=0;M<u;M+=1){if(k=e[M],w=o(k,M),h=g.get(w),h===void 0){var ze=p?p.e.nodes_start:r;y=Xt(ze,t,y,y===null?t.first:y.next,k,w,M,n,a),g.set(w,y),f=[],P=[],p=y.next;continue}if(qr(h,k,M),h.e.f&Ke&&Ht(h.e),h!==p){if(T!==void 0&&T.has(h)){if(f.length<P.length){var de=P[0],X;y=de.prev;var ae=f[0],j=f[f.length-1];for(X=0;X<f.length;X+=1)Ft(f[X],de,r);for(X=0;X<P.length;X+=1)T.delete(P[X]);me(t,ae.prev,j.next),me(t,y,ae),me(t,j,de),p=de,y=j,M-=1,f=[],P=[]}else T.delete(h),Ft(h,p,r),me(t,h.prev,h.next),me(t,h,y===null?t.first:y.next),me(t,y,h),y=h;continue}for(f=[],P=[];p!==null&&p.k!==w;)(s||!(p.e.f&Ke))&&(T??(T=new Set)).add(p),P.push(p),p=p.next;if(p===null)continue;h=p}f.push(h),y=h,p=h.next}if(p!==null||T!==void 0){for(var ie=T===void 0?[]:Gt(T);p!==null;)(s||!(p.e.f&Ke))&&ie.push(p),p=p.next;var Le=ie.length;if(Le>0){var xe=u===0?r:null;Mr(t,ie,xe,g)}}It.first=t.first&&t.first.e,It.last=y&&y.e}function qr(e,t,r,n){dr(e.v,t),e.i=r}function Xt(e,t,r,n,a,s,o,l,u,g){var x=(u&br)!==0,p=(u&xr)===0,T=x?p?mr(a):Tt(a):a,y=u&gr?Tt(o):o,f={i:y,v:T,k:s,a:null,e:null,prev:r,next:n};try{return f.e=Yt(()=>l(e,T,y),fe),f.e.prev=r&&r.e,f.e.next=n&&n.e,r===null?t.first=f:(r.next=f,r.e.next=f.e),n!==null&&(n.prev=f,n.e.prev=f.e),f}finally{}}function Ft(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,a=t?t.e.nodes_start:r,s=e.e.nodes_start;s!==n;){var o=kr(s);a.before(s),s=o}}function me(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function zt(e){if(fe){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var n=e.value;re(e,"value",null),e.value=n}if(e.hasAttribute("checked")){var a=e.checked;re(e,"checked",null),e.checked=a}}};e.__on_r=r,wr(r),Ar()}}function We(e,t){var r=e.__attributes??(e.__attributes={});r.value===(r.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t)}function re(e,t,r,n){var a=e.__attributes??(e.__attributes={});fe&&(a[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||a[t]!==(a[t]=r)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[Er]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Or(e).includes(t)?e[t]=r:e.setAttribute(t,r))}var At=new Map;function Or(e){var t=At.get(e.nodeName);if(t)return t;At.set(e.nodeName,t=[]);for(var r,n=e,a=Element.prototype;a!==n;){r=Ir(n);for(var s in r)r[s].set&&t.push(s);n=Pr(n)}return t}function Dr(e,t,r){if(r){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}function te(e,t,r,n){var a=e.__styles??(e.__styles={});a[t]!==r&&(a[t]=r,r==null?e.style.removeProperty(t):e.style.setProperty(t,r,""))}var Lr=C('<button class="svelte-1ypk9ft"><i class="material-icons md-36"> </i></button>'),Nr=C('<div class="fs svelte-1ypk9ft"><!> <!></div>');function $r(e,t){Wt(t,!0);let r=ge(!1),n=ge(null);const a=()=>{};let s=ge(a),o=ge(a),l=ge(!1);zr(()=>{I(o,()=>{(i(n).requestFullscreen||i(n).mozRequestFullScreen||i(n).webkitRequestFullscreen||i(n).msRequestFullscreen||a).bind(i(n))()}),I(s,Sr((document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen||a).bind(document))),I(l,!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled));const f=document.createElement("link");return f.rel="stylesheet",f.href="https://fonts.googleapis.com/icon?family=Material+Icons",document.head.appendChild(f),()=>{f.parentNode.removeChild(f)}});const u=()=>{i(l)&&(i(r)?i(s)():i(o)(i(n)),I(r,!i(r)))};let g=Te(()=>i(r)?"fullscreen_exit":"fullscreen");var x=Nr(),p=d(x);Fr(p,()=>t.fullscreenable,()=>i(l),()=>u);var T=_(p,2);{var y=f=>{var P=Lr();P.__click=u;var k=d(P),w=d(k,!0);c(k),c(P),A(()=>m(w,i(g))),b(f,P)};ue(T,f=>{!t.fullscreenable&&i(l)&&f(y)})}c(x),Cr(x,f=>I(n,f),()=>i(n)),A(()=>Dr(x,"isFull",i(r))),b(e,x),Kt()}Zt(["click"]);const Br=e=>Math.floor(Math.random()*e),Ur=e=>e[Br(e.length)],ce=(e,t,r)=>Math.min(r,Math.max(e,t)),ct=25,Gr={core:{type:"core",components:["targeter","health"],title:"Core",description:"Processing, control, mechanical center"},bipedalLegs:{type:"bipedalLegs",components:["fuel","stance"],title:"Legs",description:"Stand, shift, and shuffle on two feet"},handgun:{type:"handgun",components:["handgun","targeter","health"],title:"Gun",description:"Chk chk boom"},taser:{type:"taser",components:["targeter","taser","generator","battery"],title:"Taser",description:"Zzztt"},hackingModule:{type:"hackingModule",components:["targeter","hackingModule","generator","battery"],title:"Taser",description:"Zzztt"}},Ge=()=>({parentType:"resource",min:0,max:100,value:100,velocity:0,formatter:e=>Math.trunc(e)}),ft=()=>({parentType:"input",min:0,max:100,value:100,formatter:e=>Math.trunc(e)}),Hr={fuel:{type:"fuel",...Ge(),max:1e3,value:1e3,velocity:1},battery:{type:"battery",...Ge(),max:1e3,value:200,velocity:-1},generator:{type:"generator",...ft(),max:3,value:1,fuelCost:1,batteryGenerationAmount:1,chargeExponent:1.1},taser:{type:"taser",...ft(),max:1,value:0,batteryCostRatio:16,damageScaleExponent:1e-4},health:{type:"health",...Ge()},handgun:{type:"handgun",...Ge(),max:3,costPerShot:3,powerPerShot:5,value:0,velocity:.01},stance:{type:"stance",...ft(),min:-1,max:1,value:0},targeter:{type:"targeter",parentType:"unique",targetEntityId:null},hackingModule:{type:"hackingModule",...Ge(),value:0,max:100,velocity:1,chargeCost:16,phase:"scanning components",targetedComponentType:null,successChance:.8,resourceLossRatio:6}},ne=(e,t,r)=>{e.log.push({timestamp:be(),entry:r,level:t}),console.log("Log",e.log.at(-1))},Yr=()=>{const e=be();return{mostRecentUpdate:e,round:{state:"not yet started"},log:[],inputChanges:[],remainingLag:0,gameStartedTime:e,entities:[],components:[],parts:[],optimistic:[]}},K=(e,t,r)=>{const n=e.components.find(a=>a.entityId===t&&a.type===r);if(!n){const a=qe(e,t);throw new Error(`${r}' required for '${a==null?void 0:a.debug}' (${a==null?void 0:a.entityId})`)}return Xr(n,r)},qe=(e,t)=>{let r=e.entities.find(n=>n.entityId===t);return r||(r={debug:"Unknown entity",entityId:-1}),r},Mt=(e,t)=>e.components.filter(r=>r.parentType==="resource"&&r.entityId===t),Rt=(e,t)=>e.components.filter(r=>r.parentType==="input"&&r.entityId===t),be=()=>Math.trunc(performance.now()),jt=e=>{const t=be();return{...e,round:{state:"occurring"},log:[],gameStartedTime:t,mostRecentUpdate:t}};let Wr=0;const qt=(e,t)=>{let r=Wr++;return e.entities.push({entityId:r,debug:t}),r},Ie=(e,t,r)=>{const n=Gr[r];e.parts.push({...n,entityId:t}),n.components.forEach(a=>{Qt(e,t,a)})},Kr=(e,t,r)=>{e.parts=e.parts.filter(n=>!(t===n.entityId&&r===n.type)),Zr(e,t)},Zr=(e,t)=>{e.components=e.components.filter(r=>r.entityId!==t),e.parts.filter(r=>r.entityId===t).forEach(r=>r.components.forEach(n=>{Qt(e,r.entityId,n)}))},Qt=(e,t,r)=>{{let n=Hr[r];if(!n)throw new Error;if(e.components.find(s=>s.entityId===t&&s.type==r))return;let a={...n,entityId:t};e.components.push(a)}};function Xr(e,t){if(!e)throw new Error;if(e.type!==t)throw Error(`expected tag ${t} but was ${e.type}`);return e}const dt=(e,t)=>{e.inputChanges.push(t)},jr=e=>{const r=be()-e.mostRecentUpdate;e.mostRecentUpdate=be(),e.remainingLag+=r;let n=0;for(;e.remainingLag>=ct;)if(Qr(e),n++,e.remainingLag-=ct,n>100){ne(e,"debug","Lag recovery spinout");break}n>1&&ne(e,"debug",`Updated ${n} times to recover from lag`);const a=e.remainingLag/ct;Jr(e,a)},Ot=(e,t,r)=>{t&&(e.round={state:"over",reason:r})},Qr=e=>{for(;e.inputChanges.length>0;){const t=e.inputChanges.shift(),r=K(e,t.entityId,t.type);if(!r)throw new Error;if(r.parentType==="input")r.value=ce(t.value,r.min,r.max);else if(r.type==="targeter")r.targetEntityId=t.value;else throw new Error(`Unhandled input type '${t.type}'`);ne(e,"debug",`Updated ${t.type} to value ${t.value}`)}e.round.state==="occurring"&&e.components.forEach(t=>{switch(t.parentType){case"resource":{switch(t.type){case"handgun":{if(t.value<t.costPerShot)break;t.value=t.value-t.costPerShot;const r=K(e,t.entityId,"targeter");if(r.targetEntityId===null)break;const n=K(e,r.targetEntityId,"health");if(n.value===null)break;n.value-=t.powerPerShot,Ot(e,n.value<=0,"player lost :(")}break;case"hackingModule":{if(t.value<t.max)break;const r=K(e,t.entityId,"battery");if(r.value<t.chargeCost)break;t.value=t.min;let n=!1;const a=K(e,t.entityId,"targeter");if(a.targetEntityId===null)break;if(t.phase==="attempting to disable")if(t.targetedComponentType===null)ne(e,"debug","hacking module target was null when attempting to disable"),t.phase="scanning components";else{const s=K(e,a.targetEntityId,t.targetedComponentType);if(!s)ne(e,"debug","hacking module target was unavailable when attempting to disable"),t.phase="scanning components";else{const o=Math.random()>t.successChance;switch(s.parentType){case"input":case"resource":if(o){const l=s.max-s.min,u=s.value;s.value=ce(s.value-Math.ceil(l/t.resourceLossRatio),s.min,s.max);const g=s.value;ne(e,"debug",`Successfully hacked (${u}->${g}) module type '${s.type}'`)}else ne(e,"debug",`Failed to hack module type '${s.type}'`);t.phase="scanning components",t.targetedComponentType=null,n=!0;break;default:ne(e,"debug",`hacking module target type '${s.type}' unhackable`),t.phase="scanning components",t.targetedComponentType=null;break}}}if(t.phase==="scanning components"&&!n){const s=e.components.filter(l=>l.entityId===a.targetEntityId&&(l.parentType==="resource"||l.parentType==="input"));t.targetedComponentType=Ur(s).type;const o=qe(e,a.targetEntityId);t.phase="attempting to disable",ne(e,"debug",`hacking module targeted ${o.debug}'s '${t.targetedComponentType}'`),n=!0}n?r.value=ce(r.value-t.chargeCost,r.min,r.max):ne(e,"debug","hacking module did nothing")}break}t.value=ce(t.value+t.velocity,t.min,t.max)}break;case"input":{switch(t.type){case"taser":{if(t.value<=0)break;const a=K(e,t.entityId,"battery"),s=a.value;if(a.value==null)break;a.value=ce(a.value-t.batteryCostRatio*t.value,a.min,a.max);const o=s-a.value,l=K(e,t.entityId,"targeter");if(l.targetEntityId===null)break;const u=K(e,l.targetEntityId,"health");if(u.value===null)break;u.value-=ce(o**t.damageScaleExponent,u.min,u.max),Ot(e,u.value<=0,qe(e,t.entityId).debug+" won!")}break;case"generator":const r=K(e,t.entityId,"fuel"),n=K(e,t.entityId,"battery");for(let a=0;a<t.value;a++){if(r.value<t.fuelCost)return;r.value=ce(r.value-t.fuelCost,r.min,r.max),n.value=ce(n.value+t.batteryGenerationAmount*(a+1)**t.chargeExponent,n.min,n.max)}}break}}})},Jr=(e,t)=>{e.optimistic={...e.components},Object.entries(e.optimistic).forEach(([r,n])=>{const{parentType:a}=n;switch(a){case"resource":n.value=ce(n.value+n.velocity*t,n.min,n.max);break}})};var Jt=Symbol.for("immer-nothing"),Dt=Symbol.for("immer-draftable"),U=Symbol.for("immer-state");function Z(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Oe=Object.getPrototypeOf;function De(e){return!!e&&!!e[U]}function Se(e){var t;return e?Vt(e)||Array.isArray(e)||!!e[Dt]||!!((t=e.constructor)!=null&&t[Dt])||Je(e)||Ve(e):!1}var Vr=Object.prototype.constructor.toString();function Vt(e){if(!e||typeof e!="object")return!1;const t=Oe(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Vr}function Ze(e,t){Qe(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function Qe(e){const t=e[U];return t?t.type_:Array.isArray(e)?1:Je(e)?2:Ve(e)?3:0}function ht(e,t){return Qe(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function er(e,t,r){const n=Qe(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function en(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Je(e){return e instanceof Map}function Ve(e){return e instanceof Set}function Ce(e){return e.copy_||e.base_}function mt(e,t){if(Je(e))return new Map(e);if(Ve(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Vt(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[U];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(Oe(e),n)}else{const n=Oe(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function wt(e,t=!1){return et(e)||De(e)||!Se(e)||(Qe(e)>1&&(e.set=e.add=e.clear=e.delete=tn),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>wt(n,!0))),e}function tn(){Z(2)}function et(e){return Object.isFrozen(e)}var rn={};function Fe(e){const t=rn[e];return t||Z(0,e),t}var He;function tr(){return He}function nn(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Lt(e,t){t&&(Fe("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function gt(e){bt(e),e.drafts_.forEach(an),e.drafts_=null}function bt(e){e===He&&(He=e.parent_)}function Nt(e){return He=nn(He,e)}function an(e){const t=e[U];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function $t(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[U].modified_&&(gt(t),Z(4)),Se(e)&&(e=Xe(t,e),t.parent_||je(t,e)),t.patches_&&Fe("Patches").generateReplacementPatches_(r[U].base_,e,t.patches_,t.inversePatches_)):e=Xe(t,r,[]),gt(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Jt?e:void 0}function Xe(e,t,r){if(et(t))return t;const n=t[U];if(!n)return Ze(t,(a,s)=>Bt(e,n,t,a,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return je(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let s=a,o=!1;n.type_===3&&(s=new Set(a),a.clear(),o=!0),Ze(s,(l,u)=>Bt(e,n,a,l,u,r,o)),je(e,a,!1),r&&e.patches_&&Fe("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Bt(e,t,r,n,a,s,o){if(De(a)){const l=s&&t&&t.type_!==3&&!ht(t.assigned_,n)?s.concat(n):void 0,u=Xe(e,a,l);if(er(r,n,u),De(u))e.canAutoFreeze_=!1;else return}else o&&r.add(a);if(Se(a)&&!et(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Xe(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&je(e,a)}}function je(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&wt(t,r)}function sn(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:tr(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=Et;r&&(a=[n],s=Ye);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=o,l}var Et={get(e,t){if(t===U)return e;const r=Ce(e);if(!ht(r,t))return on(e,r,t);const n=r[t];return e.finalized_||!Se(n)?n:n===vt(e.base_,t)?(_t(e),e.copy_[t]=kt(n,e)):n},has(e,t){return t in Ce(e)},ownKeys(e){return Reflect.ownKeys(Ce(e))},set(e,t,r){const n=rr(Ce(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=vt(Ce(e),t),s=a==null?void 0:a[U];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(en(r,a)&&(r!==void 0||ht(e.base_,t)))return!0;_t(e),xt(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return vt(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,_t(e),xt(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Ce(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Z(11)},getPrototypeOf(e){return Oe(e.base_)},setPrototypeOf(){Z(12)}},Ye={};Ze(Et,(e,t)=>{Ye[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ye.deleteProperty=function(e,t){return Ye.set.call(this,e,t,void 0)};Ye.set=function(e,t,r){return Et.set.call(this,e[0],t,r,e[0])};function vt(e,t){const r=e[U];return(r?Ce(r):e)[t]}function on(e,t,r){var a;const n=rr(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function rr(e,t){if(!(t in e))return;let r=Oe(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Oe(r)}}function xt(e){e.modified_||(e.modified_=!0,e.parent_&&xt(e.parent_))}function _t(e){e.copy_||(e.copy_=mt(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var ln=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const o=this;return function(u=s,...g){return o.produce(u,x=>r.call(this,x,...g))}}typeof r!="function"&&Z(6),n!==void 0&&typeof n!="function"&&Z(7);let a;if(Se(t)){const s=Nt(this),o=kt(t,void 0);let l=!0;try{a=r(o),l=!1}finally{l?gt(s):bt(s)}return Lt(s,n),$t(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===Jt&&(a=void 0),this.autoFreeze_&&wt(a,!0),n){const s=[],o=[];Fe("Patches").generateReplacementPatches_(t,a,s,o),n(s,o)}return a}else Z(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,u=>t(u,...l));let n,a;return[this.produce(t,r,(o,l)=>{n=o,a=l}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Se(e)||Z(8),De(e)&&(e=un(e));const t=Nt(this),r=kt(e,void 0);return r[U].isManual_=!0,bt(t),r}finishDraft(e,t){const r=e&&e[U];(!r||!r.isManual_)&&Z(9);const{scope_:n}=r;return Lt(n,t),$t(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=Fe("Patches").applyPatches_;return De(e)?n(e,t):this.produce(e,a=>n(a,t))}};function kt(e,t){const r=Je(e)?Fe("MapSet").proxyMap_(e,t):Ve(e)?Fe("MapSet").proxySet_(e,t):sn(e,t);return(t?t.scope_:tr()).drafts_.push(r),r}function un(e){return De(e)||Z(10,e),nr(e)}function nr(e){if(!Se(e)||et(e))return e;const t=e[U];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=mt(e,t.scope_.immer_.useStrictShallowCopy_)}else r=mt(e,!0);return Ze(r,(n,a)=>{er(r,n,nr(a))}),t&&(t.finalized_=!1),r}var G=new ln,yt=G.produce;G.produceWithPatches.bind(G);G.setAutoFreeze.bind(G);G.setUseStrictShallowCopy.bind(G);G.applyPatches.bind(G);G.createDraft.bind(G);G.finishDraft.bind(G);const cn=(e,t,r)=>{I(t,"inventory"),I(r,!1)},fn=(e,t,r)=>{I(t,"store"),I(r,!1)},dn=(e,t,r,n)=>{I(t,jt(r)),I(n,!0)},Ut=(e,t,r)=>{I(t,"play"),I(r,!0)},pt=(e,t)=>{I(t,"entry")};var vn=C(`<div style="width:100%;height: 100%; display: flex; flex-direction:
			column; justify-content: space-between; align-items: center; padding-bottom: 4em;"><h1 class="svelte-1yi491q">Welcome</h1> <div><a href="?">Play</a></div> <div><a href="?">Shop</a></div> <div><a href="?">Inventory</a></div></div>`),_n=C('<p><a href="?">Begin</a></p>'),yn=C("<tr><td></td><td> </td><td> </td><td> </td><td> </td><td> </td><td><meter> </meter></td></tr>"),pn=C('<label style="display:flex; flex-direction: row; justify-content: space-between;"> <input disabled type="range"></label>'),hn=C("<tr><td></td><td> </td><td> </td><td> </td><td> </td><td> </td><td><meter> </meter></td></tr>"),mn=C('<label style="display:flex; flex-direction: row; justify-content: space-between;"> <input type="range"></label>'),gn=C('<h2 class="svelte-1yi491q">Enemy</h2> <table class="svelte-1yi491q"><thead><tr><th class="svelte-1yi491q">#</th><th class="svelte-1yi491q">Entity</th><th class="svelte-1yi491q">Type</th><th class="svelte-1yi491q">Value</th><th class="svelte-1yi491q">Min</th><th class="svelte-1yi491q">Max</th><th class="svelte-1yi491q">Meter</th></tr></thead><tbody></tbody></table> <div style="display: flex; flex-direction: column;"></div> <h2 class="svelte-1yi491q">Player</h2> <table class="svelte-1yi491q"><thead><tr><th class="svelte-1yi491q">#</th><th class="svelte-1yi491q">Entity</th><th class="svelte-1yi491q">Type</th><th class="svelte-1yi491q">Value</th><th class="svelte-1yi491q">Min</th><th class="svelte-1yi491q">Max</th><th class="svelte-1yi491q">Meter</th></tr></thead><tbody></tbody></table> <div style="display: flex; flex-direction: column;"></div>',1),bn=C('<h2 class="svelte-1yi491q">Game over</h2> <p> </p>',1),xn=C('<a href="?">Toggle Fullscreen</a>'),kn=C('<!> <nav><a href="?">Restart</a> <a href="?">Back To Title</a> <!></nav>',1),wn=C('<div style="display: flex; flex-direction: column; gap: 1em; border: 2px outset; padding-inline: 0.4em; padding-block: 0.4em;"><div style="display: flex; gap: 1em; flex-direction: row;"><div style="width: 30%; font-size: 1.4em"> </div> <div> </div></div> <div> <span> </span></div></div>'),En=C(`<h2 class="svelte-1yi491q"> </h2> <p style="padding-inline: 4em">This is your inventory where you can see your current parts. You can also rearrange your
				parts to maximize their effectiveness</p> <div style="display: flex; flex-direction: column; gap: 0.4em;"></div> <nav><a href="?">Back To Round</a> <a href="?">Back To Title</a></nav>`,1),Pn=(e,t,r)=>t(i(r)),In=C('<div style="display: flex; flex-direction: column; gap: 1em; border: 2px outset; padding-inline: 0.4em; padding-block: 0.4em;"><div style="display: flex; gap: 1em; flex-direction: row;"><div style="width: 30%; font-size: 1.4em"> </div> <div> </div></div> <div> <span> </span></div> <button>Sell</button></div>'),Tn=C('<h2 class="svelte-1yi491q">The Shop</h2> <p style="padding-inline: 4em">Buy more stuff here.</p> <div style="display: flex; flex-direction: column; gap: 0.4em;"></div> <nav><a href="?">Back To Round</a> <a href="?">Back To Title</a></nav>',1),Cn=C(`<div style="width:100%;height: 100%; display: flex; flex-direction:
			column; gap:2em;"><!></div>`);function qn(e,t){Wt(t,!0);const r=(k,w=Ct,h=Ct)=>{var M=Cn(),ze=d(M);{var de=ae=>{var j=vn(),ie=_(d(j),2),Le=d(ie);Le.__click=P,c(ie);var xe=_(ie,2),ve=d(xe);ve.__click=[fn,f,y],c(xe);var _e=_(xe,2),Ae=d(_e);Ae.__click=[cn,f,y],c(_e),c(j),b(ae,j)},X=ae=>{var j=Be(),ie=ee(j);{var Le=ve=>{var _e=kn(),Ae=ee(_e);{var tt=S=>{var F=_n(),Q=d(F);Q.__click=P,c(F),b(S,F)},rt=S=>{var F=Be(),Q=ee(F);{var Y=L=>{var R=gn(),$=_(ee(R),2),J=_(d($));Re(J,21,()=>i(x),Me,(z,v,q)=>{var O=yn(),E=d(O);E.textContent=q+1;var W=_(E),ke=d(W,!0);A(()=>m(ke,qe(i(u),i(v).entityId).debug)),c(W);var B=_(W),nt=d(B,!0);c(B);var we=_(B),at=d(we,!0);A(()=>m(at,i(v).formatter(i(v).value))),c(we);var Ee=_(we),it=d(Ee,!0);c(Ee);var Pe=_(Ee),st=d(Pe,!0);c(Pe);var $e=_(Pe),D=d($e),ot=d(D);c(D),c($e),c(O),A(()=>{m(nt,i(v).type),m(it,i(v).min),m(st,i(v).max),re(D,"min",i(v).min),re(D,"max",i(v).max),We(D,i(v).value),te(D,"width","100%"),te(D,"transform","scaleY(2)"),m(ot,`${i(v).value??""} of ${i(v).max??""}`)}),b(z,O)}),c(J),c($);var N=_($,2);Re(N,21,()=>i(T),Me,(z,v)=>{var q=pn(),O=d(q),E=_(O);zt(E);var W=Te(()=>n(i(v).type));E.__input=function(...ke){var B;(B=i(W))==null||B.apply(this,ke)},c(q),A(()=>{m(O,`${i(v).type??""} (${i(v).value??""}/${i(v).max??""}) `),re(E,"min",i(v).min),re(E,"max",i(v).max),We(E,i(v).value),te(E,"transform","scaleY(2)")}),b(z,q)}),c(N);var V=_(N,4),H=_(d(V));Re(H,21,()=>i(g),Me,(z,v,q)=>{var O=hn(),E=d(O);E.textContent=q+1;var W=_(E),ke=d(W,!0);A(()=>m(ke,qe(i(u),i(v).entityId).debug)),c(W);var B=_(W),nt=d(B,!0);c(B);var we=_(B),at=d(we,!0);A(()=>m(at,i(v).formatter(i(v).value))),c(we);var Ee=_(we),it=d(Ee,!0);c(Ee);var Pe=_(Ee),st=d(Pe,!0);c(Pe);var $e=_(Pe),D=d($e),ot=d(D);c(D),c($e),c(O),A(()=>{m(nt,i(v).type),m(it,i(v).min),m(st,i(v).max),re(D,"min",i(v).min),re(D,"max",i(v).max),We(D,i(v).value),te(D,"width","100%"),te(D,"transform","scaleY(2)"),m(ot,`${i(v).value??""} of ${i(v).max??""}`)}),b(z,O)}),c(H),c(V);var le=_(V,2);Re(le,21,()=>i(p),Me,(z,v)=>{var q=mn(),O=d(q),E=_(O);zt(E);var W=Te(()=>n(i(v).type));E.__input=function(...ke){var B;(B=i(W))==null||B.apply(this,ke)},c(q),A(()=>{m(O,`${i(v).type??""} (${i(v).value??""}/${i(v).max??""}) `),re(E,"min",i(v).min),re(E,"max",i(v).max),We(E,i(v).value),te(E,"transform","scaleY(2)")}),b(z,q)}),c(le),b(L,R)},he=L=>{var R=Be(),$=ee(R);{var J=N=>{var V=bn(),H=_(ee(V),2),le=d(H);c(H),A(()=>m(le,`Reason: ${i(u).round.reason??""}`)),b(N,V)};ue($,N=>{i(u).round.state==="over"&&N(J)},!0)}b(L,R)};ue(Q,L=>{i(u).round.state==="occurring"?L(Y):L(he,!1)},!0)}b(S,F)};ue(Ae,S=>{i(u).round.state==="not yet started"?S(tt):S(rt,!1)})}var se=_(Ae,2),ye=d(se);ye.__click=[dn,u,s,y];var pe=_(ye,2);pe.__click=[pt,f];var Ne=_(pe,2);{var oe=S=>{var F=xn();F.__click=function(...Q){var Y;(Y=h())==null||Y.apply(this,Q)},b(S,F)};ue(Ne,S=>{w()&&S(oe)})}c(se),b(ve,_e)},xe=ve=>{var _e=Be(),Ae=ee(_e);{var tt=se=>{var ye=En(),pe=ee(ye),Ne=d(pe);A(()=>m(Ne,`${qe(i(u),o).debug??""}'s Inventory`)),c(pe);var oe=_(pe,4);Re(oe,21,()=>i(u).parts.filter(({entityId:Y})=>Y===o),Me,(Y,he)=>{var L=wn(),R=d(L),$=d(R),J=d($,!0);c($);var N=_($,2),V=d(N,!0);c(N),c(R);var H=_(R,2);te(H,"font-size","0.8em");var le=d(H),z=_(le);te(z,"font-size","0.8em");var v=d(z,!0);A(()=>m(v,i(he).components.join(" "))),c(z),c(H),c(L),A(()=>{m(J,i(he).title),m(V,i(he).description),m(le,`${i(he).type??""} `)}),b(Y,L)}),c(oe);var S=_(oe,2),F=d(S);F.__click=[Ut,f,y];var Q=_(F,2);Q.__click=[pt,f],c(S),b(se,ye)},rt=se=>{var ye=Be(),pe=ee(ye);{var Ne=oe=>{var S=Tn(),F=_(ee(S),4);Re(F,21,()=>i(u).parts.filter(({entityId:L})=>L===o),Me,(L,R)=>{var $=In(),J=d($),N=d(J),V=d(N,!0);c(N);var H=_(N,2),le=d(H,!0);c(H),c(J);var z=_(J,2);te(z,"font-size","0.8em");var v=d(z),q=_(v);te(q,"font-size","0.8em");var O=d(q,!0);A(()=>m(O,i(R).components.join(" "))),c(q),c(z);var E=_(z,2);E.__click=[Pn,a,R],c($),A(()=>{m(V,i(R).title),m(le,i(R).description),m(v,`${i(R).type??""} `)}),b(L,$)}),c(F);var Q=_(F,2),Y=d(Q);Y.__click=[Ut,f,y];var he=_(Y,2);he.__click=[pt,f],c(Q),b(oe,S)};ue(pe,oe=>{i(f)==="store"&&oe(Ne)},!0)}b(se,ye)};ue(Ae,se=>{i(f)==="inventory"?se(tt):se(rt,!1)},!0)}b(ve,_e)};ue(ie,ve=>{i(f)==="play"?ve(Le):ve(xe,!1)},!0)}b(ae,j)};ue(ze,ae=>{i(f)==="entry"?ae(de):ae(X,!1)})}c(M),b(k,M)},n=k=>w=>{I(u,yt(i(u),h=>{dt(h,{entityId:o,type:k,value:Number(w.target?w.target.value:0),time:be()})}))},a=k=>{I(u,yt(i(u),w=>{Kr(w,k.entityId,k.type)}))},s=Yr(),o=qt(s,"Player");Ie(s,o,"core"),Ie(s,o,"taser"),Ie(s,o,"bipedalLegs"),Ie(s,o,"hackingModule");const l=qt(s,"Enemy");Ie(s,l,"core"),Ie(s,l,"handgun"),Ie(s,l,"bipedalLegs"),dt(s,{entityId:o,type:"targeter",value:l,time:be()}),dt(s,{entityId:l,type:"targeter",value:o,time:be()});let u=ge(s),g=Te(()=>Mt(i(u),o)),x=Te(()=>Mt(i(u),l)),p=Te(()=>Rt(i(u),o)),T=Te(()=>Rt(i(u),l)),y=ge(!1);Tr(()=>{let k;const w=()=>{i(y)&&I(u,yt(i(u),h=>{jr(h)})),k=setTimeout(w,17)};return k=setTimeout(w,0),()=>{clearTimeout(k)}});let f=ge("entry");const P=()=>{I(f,"play"),I(u,jt(s)),I(y,!0)};P(),$r(e,{fullscreenable:r}),Kt()}Zt(["click","input"]);export{qn as component};
