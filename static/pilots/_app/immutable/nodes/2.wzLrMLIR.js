import{a as m,t as S,c as Le,d as mr}from"../chunks/disclose-version.Chs3MZKY.js";import{h as de,C as mt,Q as br,a0 as xr,A as kr,b as wr,z as Pr,_ as er,H as Er,B as Dt,D as bt,c as Ke,W as Tr,as as at,F as tr,a as rr,G as Ir,w as jt,at as Cr,au as Sr,Z as Fr,av as zr,d as Ar,O as Mr,an as Rr,s as Lt,aw as Or,ax as Dr,ay as jr,T as Lr,az as Nr,aA as $r,y as Br,aB as Ur,p as nr,a6 as C,i as ar,r as P,v as i,ar as Pe,a7 as d,a9 as v,a8 as u,a5 as ke,u as qr,n as xt,e as Gr,g as Z}from"../chunks/runtime.CSRt9162.js";import{d as ir,s as g}from"../chunks/render.DcD97Zrb.js";import{i as X,b as Hr,p as Yr}from"../chunks/this.BO0ZuxZE.js";import{s as Wr}from"../chunks/snippet.CJ2BZSP8.js";import{o as Kr}from"../chunks/index-client.DfJaYR9E.js";let Nt=!1;function Zr(){Nt||(Nt=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function Ne(e,t){return t}function Xr(e,t,r,n){for(var a=[],s=t.length,o=0;o<s;o++)Sr(t[o].e,a,!0);var c=s>0&&a.length===0&&r!==null;if(c){var l=r.parentNode;Fr(l),l.append(r),n.clear(),we(e,t[0].prev,t[s-1].next)}zr(a,()=>{for(var b=0;b<s;b++){var x=t[b];c||(n.delete(x.k),we(e,x.prev,x.next)),Ar(x.e,!c)}})}function $e(e,t,r,n,a,s=null){var o=e,c={flags:t,items:new Map,first:null};{var l=e;o=de?mt(br(l)):l.appendChild(xr())}de&&kr();var b=null,x=!1;wr(()=>{var p=r(),T=Pr(p)?p:p==null?[]:er(p),_=T.length;if(x&&_===0)return;x=_===0;let f=!1;if(de){var E=o.data===Er;E!==(_===0)&&(o=Dt(),mt(o),bt(!1),f=!0)}if(de){for(var N=null,k,y=0;y<_;y++){if(Ke.nodeType===8&&Ke.data===Tr){o=Ke,f=!0,bt(!1);break}var F=T[y],ve=n(F,y);k=sr(Ke,c,N,null,F,ve,y,a,t),c.items.set(ve,k),N=k}_>0&&mt(Dt())}if(!de){var _e=Mr;Qr(T,c,o,a,t,(_e.f&at)!==0,n)}s!==null&&(_===0?b?tr(b):b=rr(()=>s(o)):b!==null&&Ir(b,()=>{b=null})),f&&bt(!0),r()}),de&&(o=Ke)}function Qr(e,t,r,n,a,s,o,c){var l=e.length,b=t.items,x=t.first,p=x,T,_=null,f=[],E=[],N,k,y,F;for(F=0;F<l;F+=1){if(N=e[F],k=o(N,F),y=b.get(k),y===void 0){var ve=p?p.e.nodes_start:r;_=sr(ve,t,_,_===null?t.first:_.next,N,k,F,n,a),b.set(k,_),f=[],E=[],p=_.next;continue}if(Jr(y,N,F),y.e.f&at&&tr(y.e),y!==p){if(T!==void 0&&T.has(y)){if(f.length<E.length){var _e=E[0],J;_=_e.prev;var Je=f[0],V=f[f.length-1];for(J=0;J<f.length;J+=1)$t(f[J],_e,r);for(J=0;J<E.length;J+=1)T.delete(E[J]);we(t,Je.prev,V.next),we(t,_,Je),we(t,V,_e),p=_e,_=V,F-=1,f=[],E=[]}else T.delete(y),$t(y,p,r),we(t,y.prev,y.next),we(t,y,_===null?t.first:_.next),we(t,_,y),_=y;continue}for(f=[],E=[];p!==null&&p.k!==k;)(s||!(p.e.f&at))&&(T??(T=new Set)).add(p),E.push(p),p=p.next;if(p===null)continue;y=p}f.push(y),_=y,p=y.next}if(p!==null||T!==void 0){for(var ee=T===void 0?[]:er(T);p!==null;)(s||!(p.e.f&at))&&ee.push(p),p=p.next;var Te=ee.length;if(Te>0){var Ge=l===0?r:null;Xr(t,ee,Ge,b)}}jt.first=t.first&&t.first.e,jt.last=_&&_.e}function Jr(e,t,r,n){Cr(e.v,t),e.i=r}function sr(e,t,r,n,a,s,o,c,l,b){var x=(l&Dr)!==0,p=(l&jr)===0,T=x?p?Rr(a):Lt(a):a,_=l&Or?Lt(o):o,f={i:_,v:T,k:s,a:null,e:null,prev:r,next:n};try{return f.e=rr(()=>c(e,T,_),de),f.e.prev=r&&r.e,f.e.next=n&&n.e,r===null?t.first=f:(r.next=f,r.e.next=f.e),n!==null&&(n.prev=f,n.e.prev=f.e),f}finally{}}function $t(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,a=t?t.e.nodes_start:r,s=e.e.nodes_start;s!==n;){var o=Lr(s);a.before(s),s=o}}function we(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Bt(e){if(de){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var n=e.value;ie(e,"value",null),e.value=n}if(e.hasAttribute("checked")){var a=e.checked;ie(e,"checked",null),e.checked=a}}};e.__on_r=r,Nr(r),Zr()}}function rt(e,t){var r=e.__attributes??(e.__attributes={});r.value===(r.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t)}function ie(e,t,r,n){var a=e.__attributes??(e.__attributes={});de&&(a[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||a[t]!==(a[t]=r)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[$r]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Vr(e).includes(t)?e[t]=r:e.setAttribute(t,r))}var Ut=new Map;function Vr(e){var t=Ut.get(e.nodeName);if(t)return t;Ut.set(e.nodeName,t=[]);for(var r,n=e,a=Element.prototype;a!==n;){r=Ur(n);for(var s in r)r[s].set&&t.push(s);n=Br(n)}return t}function en(e,t,r){if(r){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}function ne(e,t,r,n){var a=e.__styles??(e.__styles={});a[t]!==r&&(a[t]=r,r==null?e.style.removeProperty(t):e.style.setProperty(t,r,""))}var tn=S('<button class="svelte-1ypk9ft"><i class="material-icons md-36"> </i></button>'),rn=S('<div class="fs svelte-1ypk9ft"><!> <!></div>');function nn(e,t){nr(t,!0);let r=Pe(!1),n=Pe(null);const a=()=>{};let s=Pe(a),o=Pe(a),c=Pe(!1);Kr(()=>{P(o,()=>{(i(n).requestFullscreen||i(n).mozRequestFullScreen||i(n).webkitRequestFullscreen||i(n).msRequestFullscreen||a).bind(i(n))()}),P(s,Yr((document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen||a).bind(document))),P(c,!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled));const f=document.createElement("link");return f.rel="stylesheet",f.href="https://fonts.googleapis.com/icon?family=Material+Icons",document.head.appendChild(f),()=>{f.parentNode.removeChild(f)}});const l=()=>{i(c)&&(i(r)?i(s)():i(o)(i(n)),P(r,!i(r)))};let b=ke(()=>i(r)?"fullscreen_exit":"fullscreen");var x=rn(),p=d(x);Wr(p,()=>t.fullscreenable,()=>i(c),()=>l);var T=v(p,2);{var _=f=>{var E=tn();E.__click=l;var N=d(E),k=d(N,!0);u(N),u(E),C(()=>g(k,i(b))),m(f,E)};X(T,f=>{!t.fullscreenable&&i(c)&&f(_)})}u(x),Hr(x,f=>P(n,f),()=>i(n)),C(()=>en(x,"isFull",i(r))),m(e,x),ar()}ir(["click"]);const an=e=>Math.floor(Math.random()*e),sn=e=>e[an(e.length)],ae=(e,t,r)=>Math.min(r,Math.max(e,t)),kt=25,on={core:{type:"core",components:["targeter","health"],title:"Core",description:"Processing, control, mechanical center"},bipedalLegs:{type:"bipedalLegs",components:["fuel","stance"],title:"Legs",description:"Stand, shift, and shuffle on two feet"},handgun:{type:"handgun",components:["handgun","targeter","health"],title:"Gun",description:"Chk chk boom"},taser:{type:"taser",components:["targeter","taser","generator","battery"],title:"Taser",description:"Zzztt"},hackingModule:{type:"hackingModule",components:["targeter","hackingModule","hackingToggle","generator","battery"],title:"Taser",description:"Zzztt"}},Ze=()=>({parentType:"resource",min:0,max:100,value:100,velocity:0,formatter:e=>Math.trunc(e)}),nt=()=>({parentType:"input",min:0,max:100,value:100,formatter:e=>Math.trunc(e)}),ln={fuel:{type:"fuel",...Ze(),max:1e3,value:1e3,velocity:1},battery:{type:"battery",...Ze(),max:1e3,value:200,velocity:-1},generator:{type:"generator",...nt(),max:3,value:1,fuelCost:1,batteryGenerationAmount:1,chargeExponent:1.1},taser:{type:"taser",...nt(),max:1,value:0,batteryCostRatio:16,damageScaleExponent:1e-4},health:{type:"health",...Ze()},handgun:{type:"handgun",...Ze(),max:3,costPerShot:3,powerPerShot:5,value:0,velocity:.01},stance:{type:"stance",...nt(),min:-1,max:1,value:0},targeter:{type:"targeter",parentType:"unique",targetEntityId:null},hackingModule:{type:"hackingModule",...Ze(),value:0,max:100,velocity:0,progressPerCharge:1,chargeCost:16,phase:"scanning components",targetedComponentType:null,successChance:.8,resourceLossRatio:6},hackingToggle:{type:"hackingToggle",...nt(),value:0,max:1}},se=(e,t,r)=>{e.log.push({timestamp:Ee(),entry:r,level:t}),console.log("Log",e.log.at(-1))},un=e=>{const t=e.round.state;if(t!=="occurring"&&t!=="paused"){console.error("Paused when round not playing");return}e.round=t==="occurring"?{state:"paused"}:{state:"occurring"}},cn=()=>{const e=Ee();return{mostRecentUpdate:e,round:{state:"not yet started"},log:[],inputChanges:[],remainingLag:0,gameStartedTime:e,entities:[],components:[],parts:[],optimistic:[]}},U=(e,t,r)=>{const n=e.components.find(a=>a.entityId===t&&a.type===r);if(!n){const a=Be(e,t);throw new Error(`${r}' required for '${a==null?void 0:a.debug}' (${a==null?void 0:a.entityId})`)}return _n(n,r)},Be=(e,t)=>{let r=e.entities.find(n=>n.entityId===t);return r||(r={debug:"Unknown entity",entityId:-1}),r},qt=(e,t)=>e.components.filter(r=>r.parentType==="resource"&&r.entityId===t),Gt=(e,t)=>e.components.filter(r=>r.parentType==="input"&&r.entityId===t),Ee=()=>Math.trunc(performance.now()),or=e=>{const t=Ee();return{...e,round:{state:"occurring"},log:[],gameStartedTime:t,mostRecentUpdate:t}};let fn=0;const Ht=(e,t)=>{let r=fn++;return e.entities.push({entityId:r,debug:t}),r},ze=(e,t,r)=>{const n=on[r];e.parts.push({...n,entityId:t}),n.components.forEach(a=>{lr(e,t,a)})},dn=(e,t,r)=>{e.parts=e.parts.filter(n=>!(t===n.entityId&&r===n.type)),vn(e,t)},vn=(e,t)=>{e.components=e.components.filter(r=>r.entityId!==t),e.parts.filter(r=>r.entityId===t).forEach(r=>r.components.forEach(n=>{lr(e,r.entityId,n)}))},lr=(e,t,r)=>{{let n=ln[r];if(!n)throw new Error;if(e.components.find(s=>s.entityId===t&&s.type==r))return;let a={...n,entityId:t};e.components.push(a)}};function _n(e,t){if(!e)throw new Error;if(e.type!==t)throw Error(`expected tag ${t} but was ${e.type}`);return e}const wt=(e,t)=>{e.inputChanges.push(t)},pn=e=>{const r=Ee()-e.mostRecentUpdate;e.mostRecentUpdate=Ee(),e.remainingLag+=r;let n=0;for(;e.remainingLag>=kt;)if(yn(e),n++,e.remainingLag-=kt,n>100){se(e,"debug","Lag recovery spinout");break}n>1&&se(e,"debug",`Updated ${n} times to recover from lag`);const a=e.remainingLag/kt;hn(e,a)},Yt=(e,t,r)=>{t&&(e.round={state:"over",reason:r})},yn=e=>{for(;e.inputChanges.length>0;){const t=e.inputChanges.shift(),r=U(e,t.entityId,t.type);if(!r)throw new Error;if(r.parentType==="input")r.value=ae(t.value,r.min,r.max);else if(r.type==="targeter")r.targetEntityId=t.value;else throw new Error(`Unhandled input type '${t.type}'`);se(e,"debug",`Updated ${t.type} to value ${t.value}`)}e.round.state==="occurring"&&e.components.forEach(t=>{switch(t.parentType){case"resource":{switch(t.type){case"handgun":{if(t.value<t.costPerShot)break;t.value=t.value-t.costPerShot;const r=U(e,t.entityId,"targeter");if(r.targetEntityId===null)break;const n=U(e,r.targetEntityId,"health");if(n.value===null)break;n.value-=t.powerPerShot,Yt(e,n.value<=0,"player lost :(")}break;case"hackingModule":{if(U(e,t.entityId,"hackingToggle").value===0)break;const n=U(e,t.entityId,"battery");if(n.value<t.chargeCost||(n.value=ae(n.value-t.chargeCost,n.min,n.max),t.value=ae(t.value+t.progressPerCharge,t.min,t.max),t.value<t.max))break;t.value=t.min;let a=!1;const s=U(e,t.entityId,"targeter");if(s.targetEntityId===null)break;if(t.phase==="attempting to disable")if(t.targetedComponentType===null)se(e,"debug","hacking module target was null when attempting to disable"),t.phase="scanning components";else{const o=U(e,s.targetEntityId,t.targetedComponentType);if(!o)se(e,"debug","hacking module target was unavailable when attempting to disable"),t.phase="scanning components";else{const c=Math.random()>t.successChance;switch(o.parentType){case"input":case"resource":if(c){const l=o.max-o.min,b=o.value;o.value=ae(o.value-Math.ceil(l/t.resourceLossRatio),o.min,o.max);const x=o.value;se(e,"debug",`Successfully hacked (${b}->${x}) module type '${o.type}'`)}else se(e,"debug",`Failed to hack module type '${o.type}'`);t.phase="scanning components",t.targetedComponentType=null,a=!0;break;default:se(e,"debug",`hacking module target type '${o.type}' unhackable`),t.phase="scanning components",t.targetedComponentType=null;break}}}if(t.phase==="scanning components"&&!a){const o=e.components.filter(l=>l.entityId===s.targetEntityId&&(l.parentType==="resource"||l.parentType==="input"));t.targetedComponentType=sn(o).type;const c=Be(e,s.targetEntityId);t.phase="attempting to disable",se(e,"debug",`hacking module targeted ${c.debug}'s '${t.targetedComponentType}'`),a=!0}a||se(e,"debug","hacking module did nothing")}break}t.value=ae(t.value+t.velocity,t.min,t.max)}break;case"input":{switch(t.type){case"taser":{if(t.value<=0)break;const a=U(e,t.entityId,"battery"),s=a.value;if(a.value==null)break;a.value=ae(a.value-t.batteryCostRatio*t.value,a.min,a.max);const o=s-a.value,c=U(e,t.entityId,"targeter");if(c.targetEntityId===null)break;const l=U(e,c.targetEntityId,"health");if(l.value===null)break;l.value-=ae(o**t.damageScaleExponent,l.min,l.max),Yt(e,l.value<=0,Be(e,t.entityId).debug+" won!")}break;case"generator":const r=U(e,t.entityId,"fuel"),n=U(e,t.entityId,"battery");for(let a=0;a<t.value;a++){if(r.value<t.fuelCost)return;r.value=ae(r.value-t.fuelCost,r.min,r.max),n.value=ae(n.value+t.batteryGenerationAmount*(a+1)**t.chargeExponent,n.min,n.max)}break}break}}})},hn=(e,t)=>{e.optimistic={...e.components},Object.entries(e.optimistic).forEach(([r,n])=>{const{parentType:a}=n;switch(a){case"resource":n.value=ae(n.value+n.velocity*t,n.min,n.max);break}})};var ur=Symbol.for("immer-nothing"),Wt=Symbol.for("immer-draftable"),j=Symbol.for("immer-state");function Q(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ue=Object.getPrototypeOf;function qe(e){return!!e&&!!e[j]}function Me(e){var t;return e?cr(e)||Array.isArray(e)||!!e[Wt]||!!((t=e.constructor)!=null&&t[Wt])||ct(e)||ft(e):!1}var gn=Object.prototype.constructor.toString();function cr(e){if(!e||typeof e!="object")return!1;const t=Ue(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===gn}function st(e,t){ut(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function ut(e){const t=e[j];return t?t.type_:Array.isArray(e)?1:ct(e)?2:ft(e)?3:0}function It(e,t){return ut(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function fr(e,t,r){const n=ut(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function mn(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function ct(e){return e instanceof Map}function ft(e){return e instanceof Set}function Ae(e){return e.copy_||e.base_}function Ct(e,t){if(ct(e))return new Map(e);if(ft(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=cr(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[j];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],c=n[o];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(n[o]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[o]})}return Object.create(Ue(e),n)}else{const n=Ue(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function Mt(e,t=!1){return dt(e)||qe(e)||!Me(e)||(ut(e)>1&&(e.set=e.add=e.clear=e.delete=bn),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>Mt(n,!0))),e}function bn(){Q(2)}function dt(e){return Object.isFrozen(e)}var xn={};function Re(e){const t=xn[e];return t||Q(0,e),t}var Xe;function dr(){return Xe}function kn(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Kt(e,t){t&&(Re("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function St(e){Ft(e),e.drafts_.forEach(wn),e.drafts_=null}function Ft(e){e===Xe&&(Xe=e.parent_)}function Zt(e){return Xe=kn(Xe,e)}function wn(e){const t=e[j];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Xt(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[j].modified_&&(St(t),Q(4)),Me(e)&&(e=ot(t,e),t.parent_||lt(t,e)),t.patches_&&Re("Patches").generateReplacementPatches_(r[j].base_,e,t.patches_,t.inversePatches_)):e=ot(t,r,[]),St(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==ur?e:void 0}function ot(e,t,r){if(dt(t))return t;const n=t[j];if(!n)return st(t,(a,s)=>Qt(e,n,t,a,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return lt(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let s=a,o=!1;n.type_===3&&(s=new Set(a),a.clear(),o=!0),st(s,(c,l)=>Qt(e,n,a,c,l,r,o)),lt(e,a,!1),r&&e.patches_&&Re("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Qt(e,t,r,n,a,s,o){if(qe(a)){const c=s&&t&&t.type_!==3&&!It(t.assigned_,n)?s.concat(n):void 0,l=ot(e,a,c);if(fr(r,n,l),qe(l))e.canAutoFreeze_=!1;else return}else o&&r.add(a);if(Me(a)&&!dt(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ot(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&lt(e,a)}}function lt(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Mt(t,r)}function Pn(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:dr(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=Rt;r&&(a=[n],s=Qe);const{revoke:o,proxy:c}=Proxy.revocable(a,s);return n.draft_=c,n.revoke_=o,c}var Rt={get(e,t){if(t===j)return e;const r=Ae(e);if(!It(r,t))return En(e,r,t);const n=r[t];return e.finalized_||!Me(n)?n:n===Pt(e.base_,t)?(Et(e),e.copy_[t]=At(n,e)):n},has(e,t){return t in Ae(e)},ownKeys(e){return Reflect.ownKeys(Ae(e))},set(e,t,r){const n=vr(Ae(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=Pt(Ae(e),t),s=a==null?void 0:a[j];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(mn(r,a)&&(r!==void 0||It(e.base_,t)))return!0;Et(e),zt(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Pt(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Et(e),zt(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Ae(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Q(11)},getPrototypeOf(e){return Ue(e.base_)},setPrototypeOf(){Q(12)}},Qe={};st(Rt,(e,t)=>{Qe[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Qe.deleteProperty=function(e,t){return Qe.set.call(this,e,t,void 0)};Qe.set=function(e,t,r){return Rt.set.call(this,e[0],t,r,e[0])};function Pt(e,t){const r=e[j];return(r?Ae(r):e)[t]}function En(e,t,r){var a;const n=vr(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function vr(e,t){if(!(t in e))return;let r=Ue(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Ue(r)}}function zt(e){e.modified_||(e.modified_=!0,e.parent_&&zt(e.parent_))}function Et(e){e.copy_||(e.copy_=Ct(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Tn=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const o=this;return function(l=s,...b){return o.produce(l,x=>r.call(this,x,...b))}}typeof r!="function"&&Q(6),n!==void 0&&typeof n!="function"&&Q(7);let a;if(Me(t)){const s=Zt(this),o=At(t,void 0);let c=!0;try{a=r(o),c=!1}finally{c?St(s):Ft(s)}return Kt(s,n),Xt(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===ur&&(a=void 0),this.autoFreeze_&&Mt(a,!0),n){const s=[],o=[];Re("Patches").generateReplacementPatches_(t,a,s,o),n(s,o)}return a}else Q(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...c)=>this.produceWithPatches(o,l=>t(l,...c));let n,a;return[this.produce(t,r,(o,c)=>{n=o,a=c}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Me(e)||Q(8),qe(e)&&(e=In(e));const t=Zt(this),r=At(e,void 0);return r[j].isManual_=!0,Ft(t),r}finishDraft(e,t){const r=e&&e[j];(!r||!r.isManual_)&&Q(9);const{scope_:n}=r;return Kt(n,t),Xt(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=Re("Patches").applyPatches_;return qe(e)?n(e,t):this.produce(e,a=>n(a,t))}};function At(e,t){const r=ct(e)?Re("MapSet").proxyMap_(e,t):ft(e)?Re("MapSet").proxySet_(e,t):Pn(e,t);return(t?t.scope_:dr()).drafts_.push(r),r}function In(e){return qe(e)||Q(10,e),_r(e)}function _r(e){if(!Me(e)||dt(e))return e;const t=e[j];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Ct(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Ct(e,!0);return st(r,(n,a)=>{fr(r,n,_r(a))}),t&&(t.finalized_=!1),r}var L=new Tn,it=L.produce;L.produceWithPatches.bind(L);L.setAutoFreeze.bind(L);L.setUseStrictShallowCopy.bind(L);L.applyPatches.bind(L);L.createDraft.bind(L);L.finishDraft.bind(L);const Cn=(e,t,r)=>{P(t,"inventory"),P(r,!1)},Sn=(e,t,r)=>{P(t,"store"),P(r,!1)},Fn=(e,t,r,n)=>{P(t,or(r)),P(n,!0)},Jt=(e,t,r)=>{P(t,"play"),P(r,!0)},Tt=(e,t)=>{P(t,"entry")},Vt=(e,t)=>{P(t,it(i(t),r=>{un(r)}))};var zn=S(`<div style="width:100%;height: 100%; display: flex; flex-direction:
			column; justify-content: space-between; align-items: center; padding-bottom: 4em;"><h1 class="svelte-11bju47">Welcome</h1> <div><a href="?">Play</a></div> <div><a href="?">Shop</a></div> <div><a href="?">Inventory</a></div> <div><a href="/design">Design notes</a></div></div>`),An=S('<p><a href="?">Begin</a></p>'),Mn=S('<p>Paused. <a href="?">Unpause</a></p>'),Rn=S("<tr><td></td><td> </td><td> </td><td> </td><td> </td><td> </td><td><meter> </meter></td></tr>"),On=S('<label style="display:flex; flex-direction: row; justify-content: space-between;"> <input disabled type="range"></label>'),Dn=S("<tr><td></td><td> </td><td> </td><td> </td><td> </td><td> </td><td><meter> </meter></td></tr>"),jn=S('<label style="display:flex; flex-direction: row; justify-content: space-between;"> <input type="range"></label>'),Ln=S('<!> <div style="border:4px inset; padding: 4em; margin: 4em;"><h2 class="svelte-11bju47">Enemy</h2> <table class="svelte-11bju47"><thead><tr><th class="svelte-11bju47">#</th><th class="svelte-11bju47">Entity</th><th class="svelte-11bju47">Type</th><th class="svelte-11bju47">Value</th><th class="svelte-11bju47">Min</th><th class="svelte-11bju47">Max</th><th class="svelte-11bju47">Meter</th></tr></thead><tbody></tbody></table> <div style="display: flex; flex-direction: column;"></div></div> <h2 class="svelte-11bju47">Player</h2> <table class="svelte-11bju47"><thead><tr><th class="svelte-11bju47">#</th><th class="svelte-11bju47">Entity</th><th class="svelte-11bju47">Type</th><th class="svelte-11bju47">Value</th><th class="svelte-11bju47">Min</th><th class="svelte-11bju47">Max</th><th class="svelte-11bju47">Meter</th></tr></thead><tbody></tbody></table> <div style="display: flex; flex-direction: column;"></div>',1),Nn=S('<h2 class="svelte-11bju47">Game over</h2> <p> </p>',1),$n=S('<a href="?">Toggle Fullscreen</a>'),Bn=S('<!> <nav><a href="?">Restart</a> <a href="?">Back To Title</a> <!> <a href="?"> </a></nav>',1),Un=S('<div style="display: flex; flex-direction: column; gap: 1em; border: 2px outset; padding-inline: 0.4em; padding-block: 0.4em;"><div style="display: flex; gap: 1em; flex-direction: row;"><div style="width: 30%; font-size: 1.4em"> </div> <div> </div></div> <div> <span> </span></div></div>'),qn=S(`<h2 class="svelte-11bju47"> </h2> <p style="padding-inline: 4em">This is your inventory where you can see your current parts. You can also rearrange your
        parts to maximize their effectiveness</p> <div style="display: flex; flex-direction: column; gap: 0.4em;"></div> <nav><a href="?">Back To Round</a> <a href="?">Back To Title</a></nav>`,1),Gn=(e,t,r)=>t(i(r)),Hn=S('<div style="display: flex; flex-direction: column; gap: 1em; border: 2px outset; padding-inline: 0.4em; padding-block: 0.4em;"><div style="display: flex; gap: 1em; flex-direction: row;"><div style="width: 30%; font-size: 1.4em"> </div> <div> </div></div> <div> <span> </span></div> <button>Sell</button></div>'),Yn=S('<h2 class="svelte-11bju47">The Shop</h2> <p style="padding-inline: 4em">Buy more stuff here.</p> <div style="display: flex; flex-direction: column; gap: 0.4em;"></div> <nav><a href="?">Back To Round</a> <a href="?">Back To Title</a></nav>',1),Wn=S(`<div style="width:100%;height: 100%; display: flex; flex-direction:
			column; gap:2em;"><!></div>`);function ea(e,t){nr(t,!0);const r=(k,y=xt,F=xt)=>{var ve=Wn(),_e=d(ve);{var J=V=>{var ee=zn(),Te=v(d(ee),2),Ge=d(Te);Ge.__click=E,u(Te);var He=v(Te,2),pe=d(He);pe.__click=[Sn,f,_],u(He);var ye=v(He,2),Oe=d(ye);Oe.__click=[Cn,f,_],u(ye),Gr(2),u(ee),m(V,ee)},Je=V=>{var ee=Le(),Te=Z(ee);{var Ge=pe=>{var ye=Bn(),Oe=Z(ye);{var vt=A=>{var z=An(),$=d(z);$.__click=E,u(z),m(A,z)},_t=A=>{var z=Le(),$=Z(z);{var B=M=>{var G=Ln(),H=Z(G);{var Ie=W=>{var h=Mn(),D=v(d(h));D.__click=[Vt,l],u(h),m(W,h)};X(H,W=>{i(l).round.state==="paused"&&W(Ie)})}var R=v(H,2),Y=v(d(R),2),O=v(d(Y));$e(O,21,()=>i(x),Ne,(W,h,D)=>{((I,w=xt)=>{var be=Le(),K=Z(be);{var pt=xe=>{var re=Rn(),tt=d(re);tt.textContent=D+1;var Se=v(tt),yt=d(Se,!0);C(()=>g(yt,Be(i(l),w().entityId).debug)),u(Se);var je=v(Se),fe=d(je,!0);u(je);var We=v(je),pr=d(We,!0);C(()=>g(pr,w().formatter(w().value))),u(We);var ht=v(We),yr=d(ht,!0);u(ht);var gt=v(ht),hr=d(gt,!0);u(gt);var Ot=v(gt),Fe=d(Ot),gr=d(Fe);u(Fe),u(Ot),u(re),C(()=>{g(fe,w().type),g(yr,w().min),g(hr,w().max),ie(Fe,"min",w().min),ie(Fe,"max",w().max),rt(Fe,w().value),ne(Fe,"width","100%"),ne(Fe,"transform","scaleY(2)"),g(gr,`${w().value??""} of ${w().max??""}`)}),m(xe,re)},Ye=xe=>{var re=mr();C(()=>g(re,`Unrendered ${w().type??""}`)),m(xe,re)};X(K,xe=>{w().type==="fuel"?xe(pt):xe(Ye,!1)})}m(I,be)})(W,()=>i(h))}),u(O),u(Y);var ce=v(Y,2);$e(ce,21,()=>i(T),Ne,(W,h)=>{var D=On(),te=d(D),I=v(te);Bt(I);var w=ke(()=>n(i(h).type));I.__input=function(...be){var K;(K=i(w))==null||K.apply(this,be)},u(D),C(()=>{g(te,`${i(h).type??""} (${i(h).value??""}/${i(h).max??""}) `),ie(I,"min",i(h).min),ie(I,"max",i(h).max),rt(I,i(h).value),ne(I,"transform","scaleY(2)")}),m(W,D)}),u(ce),u(R);var Ce=v(R,4),Ve=v(d(Ce));$e(Ve,21,()=>i(b),Ne,(W,h,D)=>{var te=Dn(),I=d(te);I.textContent=D+1;var w=v(I),be=d(w,!0);C(()=>g(be,Be(i(l),i(h).entityId).debug)),u(w);var K=v(w),pt=d(K,!0);u(K);var Ye=v(K),xe=d(Ye,!0);C(()=>g(xe,i(h).formatter(i(h).value))),u(Ye);var re=v(Ye),tt=d(re,!0);u(re);var Se=v(re),yt=d(Se,!0);u(Se);var je=v(Se),fe=d(je),We=d(fe);u(fe),u(je),u(te),C(()=>{g(pt,i(h).type),g(tt,i(h).min),g(yt,i(h).max),ie(fe,"min",i(h).min),ie(fe,"max",i(h).max),rt(fe,i(h).value),ne(fe,"width","100%"),ne(fe,"transform","scaleY(2)"),g(We,`${i(h).value??""} of ${i(h).max??""}`)}),m(W,te)}),u(Ve),u(Ce);var et=v(Ce,2);$e(et,21,()=>i(p),Ne,(W,h)=>{var D=jn(),te=d(D),I=v(te);Bt(I);var w=ke(()=>n(i(h).type));I.__input=function(...be){var K;(K=i(w))==null||K.apply(this,be)},u(D),C(()=>{g(te,`${i(h).type??""} (${i(h).value??""}/${i(h).max??""}) `),ie(I,"min",i(h).min),ie(I,"max",i(h).max),rt(I,i(h).value),ne(I,"transform","scaleY(2)")}),m(W,D)}),u(et),m(M,G)},q=M=>{var G=Le(),H=Z(G);{var Ie=R=>{var Y=Nn(),O=v(Z(Y),2),ce=d(O);u(O),C(()=>g(ce,`Reason: ${i(l).round.reason??""}`)),m(R,Y)};X(H,R=>{i(l).round.state==="over"&&R(Ie)},!0)}m(M,G)};X($,M=>{i(l).round.state==="occurring"||i(l).round.state==="paused"?M(B):M(q,!1)},!0)}m(A,z)};X(Oe,A=>{i(l).round.state==="not yet started"?A(vt):A(_t,!1)})}var oe=v(Oe,2),he=d(oe);he.__click=[Fn,l,s,_];var ge=v(he,2);ge.__click=[Tt,f];var De=v(ge,2);{var le=A=>{var z=$n();z.__click=function(...$){var B;(B=F())==null||B.apply(this,$)},m(A,z)};X(De,A=>{y()&&A(le)})}var ue=v(De,2);ue.__click=[Vt,l];var me=d(ue);u(ue),u(oe),C(()=>g(me,`Pause${(i(N)?" (Paused)":"")??""}`)),m(pe,ye)},He=pe=>{var ye=Le(),Oe=Z(ye);{var vt=oe=>{var he=qn(),ge=Z(he),De=d(ge);C(()=>g(De,`${Be(i(l),o).debug??""}'s Inventory`)),u(ge);var le=v(ge,4);$e(le,21,()=>i(l).parts.filter(({entityId:z})=>z===o),Ne,(z,$)=>{var B=Un(),q=d(B),M=d(q),G=d(M,!0);u(M);var H=v(M,2),Ie=d(H,!0);u(H),u(q);var R=v(q,2);ne(R,"font-size","0.8em");var Y=d(R),O=v(Y);ne(O,"font-size","0.8em");var ce=d(O,!0);C(()=>g(ce,i($).components.join(" "))),u(O),u(R),u(B),C(()=>{g(G,i($).title),g(Ie,i($).description),g(Y,`${i($).type??""} `)}),m(z,B)}),u(le);var ue=v(le,2),me=d(ue);me.__click=[Jt,f,_];var A=v(me,2);A.__click=[Tt,f],u(ue),m(oe,he)},_t=oe=>{var he=Le(),ge=Z(he);{var De=le=>{var ue=Yn(),me=v(Z(ue),4);$e(me,21,()=>i(l).parts.filter(({entityId:B})=>B===o),Ne,(B,q)=>{var M=Hn(),G=d(M),H=d(G),Ie=d(H,!0);u(H);var R=v(H,2),Y=d(R,!0);u(R),u(G);var O=v(G,2);ne(O,"font-size","0.8em");var ce=d(O),Ce=v(ce);ne(Ce,"font-size","0.8em");var Ve=d(Ce,!0);C(()=>g(Ve,i(q).components.join(" "))),u(Ce),u(O);var et=v(O,2);et.__click=[Gn,a,q],u(M),C(()=>{g(Ie,i(q).title),g(Y,i(q).description),g(ce,`${i(q).type??""} `)}),m(B,M)}),u(me);var A=v(me,2),z=d(A);z.__click=[Jt,f,_];var $=v(z,2);$.__click=[Tt,f],u(A),m(le,ue)};X(ge,le=>{i(f)==="store"&&le(De)},!0)}m(oe,he)};X(Oe,oe=>{i(f)==="inventory"?oe(vt):oe(_t,!1)},!0)}m(pe,ye)};X(Te,pe=>{i(f)==="play"?pe(Ge):pe(He,!1)},!0)}m(V,ee)};X(_e,V=>{i(f)==="entry"?V(J):V(Je,!1)})}u(ve),m(k,ve)},n=k=>y=>{P(l,it(i(l),F=>{wt(F,{entityId:o,type:k,value:Number(y.target?y.target.value:0),time:Ee()})}))},a=k=>{P(l,it(i(l),y=>{dn(y,k.entityId,k.type)}))},s=cn(),o=Ht(s,"Player");ze(s,o,"core"),ze(s,o,"taser"),ze(s,o,"bipedalLegs"),ze(s,o,"hackingModule");const c=Ht(s,"Enemy");ze(s,c,"core"),ze(s,c,"handgun"),ze(s,c,"bipedalLegs"),wt(s,{entityId:o,type:"targeter",value:c,time:Ee()}),wt(s,{entityId:c,type:"targeter",value:o,time:Ee()});let l=Pe(s),b=ke(()=>qt(i(l),o)),x=ke(()=>qt(i(l),c)),p=ke(()=>Gt(i(l),o)),T=ke(()=>Gt(i(l),c)),_=Pe(!1);qr(()=>{let k;const y=()=>{i(_)&&P(l,it(i(l),F=>{pn(F)})),k=setTimeout(y,17)};return k=setTimeout(y,0),()=>{clearTimeout(k)}});let f=Pe("entry");const E=()=>{P(f,"play"),P(l,or(s)),P(_,!0)};E();const N=ke(()=>i(l).round.state==="paused");nn(e,{fullscreenable:r}),ar()}ir(["click","input"]);export{ea as component};
